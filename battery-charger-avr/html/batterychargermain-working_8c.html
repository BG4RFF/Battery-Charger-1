<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>BatteryCharger: batterychargermain-working.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>batterychargermain-working.c File Reference</h1><code>#include &lt;inttypes.h&gt;</code><br/>
<code>#include &lt;avr/sfr_defs.h&gt;</code><br/>
<code>#include &lt;avr/eeprom.h&gt;</code><br/>
<code>#include &lt;avr/io.h&gt;</code><br/>
<code>#include &lt;avr/wdt.h&gt;</code><br/>
<code>#include &lt;avr/interrupt.h&gt;</code><br/>
<code>#include &quot;solarregulatormain.h&quot;</code><br/>
<code>#include &quot;lcd/lcd-HD44780.h&quot;</code><br/>
<code>#include &quot;uart/uart.h&quot;</code><br/>
<code>#include &quot;timer/timer.h&quot;</code><br/>
<code>#include &quot;twi/i2c.h&quot;</code><br/>
<code>#include &quot;nartos/nartos.h&quot;</code><br/>
<div class="dynheader">
Include dependency graph for batterychargermain-working.c:</div>
<div class="dynsection">
<div class="center"><img src="batterychargermain-working_8c__incl.png" border="0" usemap="#batterychargermain-working_8c_map" alt=""/></div>
</div>

<p><a href="batterychargermain-working_8c_source.html">Go to the source code of this file.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Data Structures</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">union &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="uniontimeUnion.html">timeUnion</a></td></tr>
<tr><td colspan="2"><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="batterychargermain-working_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>&nbsp;&nbsp;&nbsp;1</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="batterychargermain-working_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>&nbsp;&nbsp;&nbsp;0</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="batterychargermain-working_8c.html#a11643f271076024c395a93800b3d9546">_BV</a>(bit)&nbsp;&nbsp;&nbsp;(1 &lt;&lt; (bit))</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="batterychargermain-working_8c.html#a5f2f31448ae0df9a545e0ca95e748f16">inb</a>(sfr)&nbsp;&nbsp;&nbsp;_SFR_BYTE(sfr)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="batterychargermain-working_8c.html#ab5e5eb4fcc7a892227a005faab343610">inw</a>(sfr)&nbsp;&nbsp;&nbsp;_SFR_WORD(sfr)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="batterychargermain-working_8c.html#ab2639428f628a54f52f28ace148beb13">outb</a>(sfr, val)&nbsp;&nbsp;&nbsp;(_SFR_BYTE(sfr) = (val))</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="batterychargermain-working_8c.html#aaf663ae912dca7197d8ffab94ecbfb6d">outw</a>(sfr, val)&nbsp;&nbsp;&nbsp;(_SFR_WORD(sfr) = (val))</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="batterychargermain-working_8c.html#ae70baf5399951da1e7ad45a0ed890832">cbi</a>(sfr, bit)&nbsp;&nbsp;&nbsp;(_SFR_BYTE(sfr) &amp;= ~_BV(bit))</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="batterychargermain-working_8c.html#ac4a5536d9bf092116f88b94797ddc882">sbi</a>(sfr, bit)&nbsp;&nbsp;&nbsp;(_SFR_BYTE(sfr) |= _BV(bit))</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="batterychargermain-working_8c.html#a292660d4f9b4776e3ae19a977c2c9d51">high</a>(x)&nbsp;&nbsp;&nbsp;((uint8_t) (x &gt;&gt; 8) &amp; 0xFF)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="batterychargermain-working_8c.html#ae7272abbc457b8a5fd4de78326f216a3">low</a>(x)&nbsp;&nbsp;&nbsp;((uint8_t) (x &amp; 0xFF))</td></tr>
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="batterychargermain-working_8c.html#a840291bc02cba5474a4cb46a9b9566fe">main</a> (void)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Main Program.  <a href="#a840291bc02cba5474a4cb46a9b9566fe"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="batterychargermain-working_8c.html#a191232e6a11e2e3ff418840dd0e96165">initiateControlTask</a> (void)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Launch the Control task.  <a href="#a191232e6a11e2e3ff418840dd0e96165"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="batterychargermain-working_8c.html#aa64a0693168a30814f9304c373e0340c">measurementTask</a> (void)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Measurement task.  <a href="#aa64a0693168a30814f9304c373e0340c"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="batterychargermain-working_8c.html#a3cf36f2c1a76081759b205461a58486b">controlTask</a> (void)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Control task.  <a href="#a3cf36f2c1a76081759b205461a58486b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="batterychargermain-working_8c.html#a4fa00331e1f30a77a6c22295226a3e5f">displayTask</a> (void)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Display task.  <a href="#a4fa00331e1f30a77a6c22295226a3e5f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="batterychargermain-working_8c.html#a28016e2edd199b39d8f2d9e91e2f0b9b">processError</a> (void)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Error Processing task.  <a href="#a28016e2edd199b39d8f2d9e91e2f0b9b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="batterychargermain-working_8c.html#a205d394554b7ed3eba57e98560bd63d6">processCommand</a> (void)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Input Packet Interpretation Processing task.  <a href="#a205d394554b7ed3eba57e98560bd63d6"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="batterychargermain-working_8c.html#acc44d8087c0b66e42e09a8d11c8d612e">inputPacketReceive</a> (void)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">PC Communication Input task.  <a href="#acc44d8087c0b66e42e09a8d11c8d612e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="batterychargermain-working_8c.html#a76390f69852e64ce7f47a441f0b04b49">outputPacketSend</a> (void)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">PC Communication Output task.  <a href="#a76390f69852e64ce7f47a441f0b04b49"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="batterychargermain-working_8c.html#a6265f456d8af4a996aefb1e29b8ce6a4">ISR</a> (SIG_OVERFLOW0)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Timer 0 ISR.  <a href="#a6265f456d8af4a996aefb1e29b8ce6a4"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">long&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="batterychargermain-working_8c.html#ab54b3bf861d0d10e37596e01b486fa88">rescale</a> (const int quantity, const int multiplier, const int offset)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Scale a measured A/D quantity.  <a href="#ab54b3bf861d0d10e37596e01b486fa88"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="batterychargermain-working_8c.html#a5f63e93affef46753d63308e74e09abe">display</a> (const long value)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Display a 32 bit value as decimal on the LCD.  <a href="#a5f63e93affef46753d63308e74e09abe"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="batterychargermain-working_8c.html#a3a0f1749987e2d979e5216e045fe5fb2">setErrorCode</a> (const unsigned int code)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Set the Error Code.  <a href="#a3a0f1749987e2d979e5216e045fe5fb2"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Board.html#gae8468abafca592176f2b75294fd35132">configurePorts</a> (void)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Configure the ports to match hardware.  <a href="group__Board.html#gae8468abafca592176f2b75294fd35132"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Board.html#gaf3ffcbf6810151d25d3bd59d1c9368a6">openPanel</a> (void)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Port B output 0 when high will open the panel for charging.  <a href="group__Board.html#gaf3ffcbf6810151d25d3bd59d1c9368a6"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Board.html#gadb553bc5b111241ffdb14d98f4471cbe">shortPanel</a> (void)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Port B output 0 when low will short the panel.  <a href="group__Board.html#gadb553bc5b111241ffdb14d98f4471cbe"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Board.html#gad6b6b32ba01b85512eda6df9a5503b07">connectLoad</a> (void)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Port B output 1 when low will connect the battery to the load.  <a href="group__Board.html#gad6b6b32ba01b85512eda6df9a5503b07"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Board.html#gab6e8f32646f2f96e72fe55b23f611353">isolateLoad</a> (void)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Port B output 1 when high will isolate the load.  <a href="group__Board.html#gab6e8f32646f2f96e72fe55b23f611353"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Board.html#ga86980aa118e8cc1e123632b17ce5cdcd">onLED</a> (void)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Port B output 1 when low will turn off a LED.  <a href="group__Board.html#ga86980aa118e8cc1e123632b17ce5cdcd"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Board.html#ga05d5c098157944c524536014c04450bc">offLED</a> (void)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Port B output 2 when high will turn on a LED.  <a href="group__Board.html#ga05d5c098157944c524536014c04450bc"></a><br/></td></tr>
<tr><td colspan="2"><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">union <a class="el" href="uniontimeUnion.html">timeUnion</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="batterychargermain-working_8c.html#a85f9d04fa58cdbb8d366d1d238df2298">time</a></td></tr>
<tr><td colspan="2"><div class="groupHeader">Timer Counters</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p><a class="anchor" id="amgrpdf889a8a159bb127a051c2035846d376"></a> </p>
<br/><br/></div></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">volatile uint16_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="batterychargermain-working_8c.html#acd768ec37d82f6e62016795dc1025ebb">controlDelayCounter</a> = 0</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">volatile uint16_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="batterychargermain-working_8c.html#aa5a6510f0f623d17e1e8fd6bbf2ad3e7">controlTaskCounter</a> = 0</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">volatile uint16_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="batterychargermain-working_8c.html#a0bc290cc1160ea6d01403b340173b1e0">controlInterval</a> = 0</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">volatile uint16_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="batterychargermain-working_8c.html#a7b087536d89a99329e2fe6fb87b94fd9">displayDelayCounter</a> = 0</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">volatile uint16_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="batterychargermain-working_8c.html#a948ced818998317dce10237715d0c267">displayTaskCounter</a> = 0</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">volatile uint16_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="batterychargermain-working_8c.html#afae27216d220c1223a10e27629712c19">displayInterval</a> = 0</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">volatile uint16_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="batterychargermain-working_8c.html#a8d890aa792de12a76bf2966bcb97f2b0">measurementTaskCounter</a> = 0</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">volatile uint16_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="batterychargermain-working_8c.html#aaf6e1032f4246d3cd5e3a3b341d2b671">measurementInterval</a> = 0</td></tr>
<tr><td colspan="2"><div class="groupHeader">UART variables</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p><a class="anchor" id="amgrp5c63736ba76365b492e7c30bfadb79d2"></a> </p>
<br/><br/></div></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">volatile uint16_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="batterychargermain-working_8c.html#a7fd10db8318645a3d766299507ee04ec">uartInput</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">volatile uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="batterychargermain-working_8c.html#a4f3924f246381d846250e2fd235fea0c">lastError</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">volatile uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="batterychargermain-working_8c.html#a9ef2a152a03697ad9fbba040d523d6f7">checkSum</a></td></tr>
<tr><td colspan="2"><div class="groupHeader">Input state machine variables</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p><a class="anchor" id="amgrp1ccd3afdff8dd9e3915862b85aacbbc4"></a> </p>
<br/><br/></div></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">volatile uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="batterychargermain-working_8c.html#ab34f433c219e0c523a7ef97522c879dc">packetInState</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">volatile uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="batterychargermain-working_8c.html#a21200e210f4d6e6bb3848327d1e8d305">numberInBytes</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">volatile uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="batterychargermain-working_8c.html#afdacc362e4de77b49d506901c1047c6f">dataInByteCount</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">volatile uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="batterychargermain-working_8c.html#a2a6b3e241086c8d77bf5ca1b95194a5d">inputCommand</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">volatile uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="batterychargermain-working_8c.html#ad31eb454ba420d4b96a0ab081fad22b2">inputBuffer</a> [DATA_BUFFER_SIZE]</td></tr>
<tr><td colspan="2"><div class="groupHeader">Output state machine variables</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p><a class="anchor" id="amgrp484379ae1d351a96f8d14bc0d504a294"></a> </p>
<br/><br/></div></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">volatile uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="batterychargermain-working_8c.html#a9ca9d2f025bc5b95d5292f24001a69ca">outputBusy</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">volatile uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="batterychargermain-working_8c.html#afd5b550b656e871a608787628951ba26">packetOutState</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">volatile uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="batterychargermain-working_8c.html#ab4b4353148d1c692da89cf9756ccd212">numberOutBytes</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">volatile uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="batterychargermain-working_8c.html#aedf793294b259d51ea70c9485a039d38">dataOutByteCount</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">volatile uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="batterychargermain-working_8c.html#a51dc2e1f8dc91e0f187a1a52f47c329a">outputCommand</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">volatile uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="batterychargermain-working_8c.html#a44fdf832ce87243ed73d608943a16280">outputBuffer</a> [DATA_BUFFER_SIZE]</td></tr>
<tr><td colspan="2"><div class="groupHeader">Task IDs</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p><a class="anchor" id="amgrpeadb8279823afc17e58667ec64f7fc29"></a> </p>
<br/><br/></div></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">volatile uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="batterychargermain-working_8c.html#aebb9394d7ac906d5f7c365ee54de580a">inputPacketReceiveID</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">volatile uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="batterychargermain-working_8c.html#a1567560e4d1bd520526129f1deb66cf2">outputPacketSendID</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">volatile uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="batterychargermain-working_8c.html#a551c15929349e9202d22c74017bf8b35">processCommandID</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">volatile uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="batterychargermain-working_8c.html#a598cd7cba0d489c139e3f1f6fb3e6242">processErrorID</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">volatile uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="batterychargermain-working_8c.html#a8e50d25b1b65538fb1ecb2ea96cbb53c">initiateControlTaskID</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">volatile uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="batterychargermain-working_8c.html#a600efb8c8ecd7f4087b87fb80b89b167">controlTaskID</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">volatile uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="batterychargermain-working_8c.html#a75ebbd2b2b4c1fc8b68aa5b6de48f08d">measurementTaskID</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">volatile uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="batterychargermain-working_8c.html#a6c79a5318db4ee8e65c6cef2a8a82ca0">displayTaskID</a></td></tr>
<tr><td colspan="2"><div class="groupHeader">Command specific variables</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p><a class="anchor" id="amgrp5e8f5f5e28daec8f04a58d42369e5f47"></a> </p>
<br/><br/></div></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">volatile uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="batterychargermain-working_8c.html#a9e85548c417798e5b7a10a374b17bf8b">eepromCount</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const uint8_t *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="batterychargermain-working_8c.html#a018f44092d5516aa365fb05a5fae454d">address</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">volatile uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="batterychargermain-working_8c.html#aa516e61498dcae2094210826c2237a3b">adcControlByte</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">volatile uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="batterychargermain-working_8c.html#a4cda2ae0c5ac82065b23cadd4843a34b">adcChannel</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">volatile uint16_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="batterychargermain-working_8c.html#a3b1f082715ab0cb6aad27fdec1e0bbd5">bufferStartPointer</a> = BUFFER_START</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">volatile uint16_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="batterychargermain-working_8c.html#af5b0f876a699a5120b609786eda6b836">bufferEndPointer</a> = BUFFER_START</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">volatile uint16_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="batterychargermain-working_8c.html#a027ce09cc85d623a7b88d5a50fa4bcba">newBufferEndPointer</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">volatile uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="batterychargermain-working_8c.html#a341d57392681258eec896170acfd2555">shift</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">volatile uint16_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="batterychargermain-working_8c.html#a0db3e38524f5ab868ce22954a5e8b2ec">numberConversions</a></td></tr>
<tr><td colspan="2"><div class="groupHeader">Task global variables</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p><a class="anchor" id="amgrp236a2f39fc21d504d8e22cf084af5f0b"></a> </p>
<br/><br/></div></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">volatile uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="batterychargermain-working_8c.html#ae6a114ccbf95c0425aa1c846d08b3995">rtcScale</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">volatile uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="batterychargermain-working_8c.html#ae4eaf3090c7441991d6d9eac9ea0df66">localEEPROMDevice</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">volatile uint16_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="batterychargermain-working_8c.html#a79870af82979168fe9e4ffd0ba44a972">eepromEnd</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">volatile uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="batterychargermain-working_8c.html#af35d731629179ecb297e5def70670325">adcShift</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">volatile uint16_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="batterychargermain-working_8c.html#aa98c853e40224609bfb1150530123d7f">channelValue</a> [4]</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">volatile uint16_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="batterychargermain-working_8c.html#a6d4cd547517c8331715865748d9c2f7e">scaledChannelValue</a> [4]</td></tr>
</table>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="a11643f271076024c395a93800b3d9546"></a><!-- doxytag: member="batterychargermain&#45;working.c::_BV" ref="a11643f271076024c395a93800b3d9546" args="(bit)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define _BV</td>
          <td>(</td>
          <td class="paramtype">bit&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;(1 &lt;&lt; (bit))</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="batterychargermain-working_8c_source.html#l00063">63</a> of file <a class="el" href="batterychargermain-working_8c_source.html">batterychargermain-working.c</a>.</p>

</div>
</div>
<a class="anchor" id="ae70baf5399951da1e7ad45a0ed890832"></a><!-- doxytag: member="batterychargermain&#45;working.c::cbi" ref="ae70baf5399951da1e7ad45a0ed890832" args="(sfr, bit)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define cbi</td>
          <td>(</td>
          <td class="paramtype">sfr, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bit&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;(_SFR_BYTE(sfr) &amp;= ~_BV(bit))</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="batterychargermain-working_8c_source.html#l00068">68</a> of file <a class="el" href="batterychargermain-working_8c_source.html">batterychargermain-working.c</a>.</p>

</div>
</div>
<a class="anchor" id="aa93f0eb578d23995850d61f7d61c55c1"></a><!-- doxytag: member="batterychargermain&#45;working.c::FALSE" ref="aa93f0eb578d23995850d61f7d61c55c1" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FALSE&nbsp;&nbsp;&nbsp;0</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="batterychargermain-working_8c_source.html#l00061">61</a> of file <a class="el" href="batterychargermain-working_8c_source.html">batterychargermain-working.c</a>.</p>

</div>
</div>
<a class="anchor" id="a292660d4f9b4776e3ae19a977c2c9d51"></a><!-- doxytag: member="batterychargermain&#45;working.c::high" ref="a292660d4f9b4776e3ae19a977c2c9d51" args="(x)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define high</td>
          <td>(</td>
          <td class="paramtype">x&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;((uint8_t) (x &gt;&gt; 8) &amp; 0xFF)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="batterychargermain-working_8c_source.html#l00070">70</a> of file <a class="el" href="batterychargermain-working_8c_source.html">batterychargermain-working.c</a>.</p>

</div>
</div>
<a class="anchor" id="a5f2f31448ae0df9a545e0ca95e748f16"></a><!-- doxytag: member="batterychargermain&#45;working.c::inb" ref="a5f2f31448ae0df9a545e0ca95e748f16" args="(sfr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define inb</td>
          <td>(</td>
          <td class="paramtype">sfr&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;_SFR_BYTE(sfr)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="batterychargermain-working_8c_source.html#l00064">64</a> of file <a class="el" href="batterychargermain-working_8c_source.html">batterychargermain-working.c</a>.</p>

</div>
</div>
<a class="anchor" id="ab5e5eb4fcc7a892227a005faab343610"></a><!-- doxytag: member="batterychargermain&#45;working.c::inw" ref="ab5e5eb4fcc7a892227a005faab343610" args="(sfr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define inw</td>
          <td>(</td>
          <td class="paramtype">sfr&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;_SFR_WORD(sfr)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="batterychargermain-working_8c_source.html#l00065">65</a> of file <a class="el" href="batterychargermain-working_8c_source.html">batterychargermain-working.c</a>.</p>

</div>
</div>
<a class="anchor" id="ae7272abbc457b8a5fd4de78326f216a3"></a><!-- doxytag: member="batterychargermain&#45;working.c::low" ref="ae7272abbc457b8a5fd4de78326f216a3" args="(x)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define low</td>
          <td>(</td>
          <td class="paramtype">x&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;((uint8_t) (x &amp; 0xFF))</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="batterychargermain-working_8c_source.html#l00071">71</a> of file <a class="el" href="batterychargermain-working_8c_source.html">batterychargermain-working.c</a>.</p>

</div>
</div>
<a class="anchor" id="ab2639428f628a54f52f28ace148beb13"></a><!-- doxytag: member="batterychargermain&#45;working.c::outb" ref="ab2639428f628a54f52f28ace148beb13" args="(sfr, val)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define outb</td>
          <td>(</td>
          <td class="paramtype">sfr, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">val&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;(_SFR_BYTE(sfr) = (val))</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="batterychargermain-working_8c_source.html#l00066">66</a> of file <a class="el" href="batterychargermain-working_8c_source.html">batterychargermain-working.c</a>.</p>

</div>
</div>
<a class="anchor" id="aaf663ae912dca7197d8ffab94ecbfb6d"></a><!-- doxytag: member="batterychargermain&#45;working.c::outw" ref="aaf663ae912dca7197d8ffab94ecbfb6d" args="(sfr, val)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define outw</td>
          <td>(</td>
          <td class="paramtype">sfr, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">val&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;(_SFR_WORD(sfr) = (val))</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="batterychargermain-working_8c_source.html#l00067">67</a> of file <a class="el" href="batterychargermain-working_8c_source.html">batterychargermain-working.c</a>.</p>

</div>
</div>
<a class="anchor" id="ac4a5536d9bf092116f88b94797ddc882"></a><!-- doxytag: member="batterychargermain&#45;working.c::sbi" ref="ac4a5536d9bf092116f88b94797ddc882" args="(sfr, bit)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define sbi</td>
          <td>(</td>
          <td class="paramtype">sfr, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bit&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;(_SFR_BYTE(sfr) |= _BV(bit))</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="batterychargermain-working_8c_source.html#l00069">69</a> of file <a class="el" href="batterychargermain-working_8c_source.html">batterychargermain-working.c</a>.</p>

</div>
</div>
<a class="anchor" id="aa8cecfc5c5c054d2875c03e77b7be15d"></a><!-- doxytag: member="batterychargermain&#45;working.c::TRUE" ref="aa8cecfc5c5c054d2875c03e77b7be15d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TRUE&nbsp;&nbsp;&nbsp;1</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="batterychargermain-working_8c_source.html#l00060">60</a> of file <a class="el" href="batterychargermain-working_8c_source.html">batterychargermain-working.c</a>.</p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="a3cf36f2c1a76081759b205461a58486b"></a><!-- doxytag: member="batterychargermain&#45;working.c::controlTask" ref="a3cf36f2c1a76081759b205461a58486b" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void controlTask </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Control task. </p>
<p>This task runs the main control of the Regulator and relinquishes when possible to allow serial input and output to occur. This task has absolute priority.</p>
<p>This is a test version to check battery operation. The battery voltage is measured as a sequence of rapid measurements that are averaged, then the load is disconnected. Every 100ms a measurement is taken until the voltage has settled. This can then be used to determine the capacity.</p>
<p>Under normal conditions the load would not be disconnected until the voltage drops below a critical level. </p>

<p><p>Write the new pointers to their location in EEPROM. We do this before rather than after the A/D converted values are stored, because after a write to the I2c bus has been executed, an indeterminate delay is needed for the bus to become free (following a stop condition that is never signalled). We are safer to use the A/D conversions to provide that delay.</p>
<p>Firstly check if the buffer is full if it is a blocking buffer, then compute a new end pointer that would hold after a data block is written </p>
</p>

<p>Definition at line <a class="el" href="batterychargermain-working_8c_source.html#l00348">348</a> of file <a class="el" href="batterychargermain-working_8c_source.html">batterychargermain-working.c</a>.</p>

<p>References <a class="el" href="batterychargermain_8h_source.html#l00068">BUFFER_START</a>, <a class="el" href="batterychargermain-faulty_8c_source.html#l00142">bufferEndPointer</a>, <a class="el" href="batterychargermain-faulty_8c_source.html#l00141">bufferStartPointer</a>, <a class="el" href="batterychargermain-faulty_8c_source.html#l00091">controlDelayCounter</a>, <a class="el" href="batterychargermain_8h_source.html#l00071">DATA_BLOCK_SIZE</a>, <a class="el" href="batterychargermain-faulty_8c_source.html#l00150">eepromEnd</a>, <a class="el" href="batterychargermain-faulty_8c_source.html#l00061">FALSE</a>, <a class="el" href="batterychargermain_8c_source.html#l00154">floatThreshold</a>, <a class="el" href="batterychargermain-faulty_8c_source.html#l00070">high</a>, <a class="el" href="batterychargermain-faulty_8c_source.html#l00149">localEEPROMDevice</a>, <a class="el" href="batterychargermain-faulty_8c_source.html#l00071">low</a>, <a class="el" href="batterychargermain-faulty_8c_source.html#l00308">measurementTask()</a>, <a class="el" href="batterychargermain-faulty_8c_source.html#l00133">measurementTaskID</a>, <a class="el" href="batterychargermain-faulty_8c_source.html#l00143">newBufferEndPointer</a>, <a class="el" href="batterychargermain_8c_source.html#l01342">openPanel()</a>, <a class="el" href="batterychargermain-faulty_8c_source.html#l00153">scaledChannelValue</a>, <a class="el" href="batterychargermain_8c_source.html#l01350">shortPanel()</a>, <a class="el" href="batterychargermain-faulty_8c.html#a85f9d04fa58cdbb8d366d1d238df2298">time</a>, and <a class="el" href="batterychargermain-faulty_8c_source.html#l00082">timeUnion::timeByte</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<div class="center"><img src="batterychargermain-working_8c_a3cf36f2c1a76081759b205461a58486b_cgraph.png" border="0" usemap="#batterychargermain-working_8c_a3cf36f2c1a76081759b205461a58486b_cgraph_map" alt=""></div>
<map name="batterychargermain-working_8c_a3cf36f2c1a76081759b205461a58486b_cgraph_map" id="batterychargermain-working_8c_a3cf36f2c1a76081759b205461a58486b_cgraph">
<area shape="rect" href="batterychargermain-faulty_8c.html#aa64a0693168a30814f9304c373e0340c" title="Measurement task." alt="" coords="141,5,269,35"/><area shape="rect" href="group__Board.html#gaf3ffcbf6810151d25d3bd59d1c9368a6" title="Port B output 0 when high will open the panel for charging." alt="" coords="165,59,245,88"/><area shape="rect" href="group__Board.html#gadb553bc5b111241ffdb14d98f4471cbe" title="Port B output 0 when low will short the panel." alt="" coords="164,112,247,141"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a5f63e93affef46753d63308e74e09abe"></a><!-- doxytag: member="batterychargermain&#45;working.c::display" ref="a5f63e93affef46753d63308e74e09abe" args="(const long value)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void display </td>
          <td>(</td>
          <td class="paramtype">const long&nbsp;</td>
          <td class="paramname"> <em>value</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Display a 32 bit value as decimal on the LCD. </p>
<p>The value is an A/D conversion result. 16 bits represents a value out of 100 and 3 decimal digits are displayed as appropriate for a 10 bit A/D converter.</p>
<p>: 32 bit integer value to be converted </p>

<p>Definition at line <a class="el" href="batterychargermain-working_8c_source.html#l01237">1237</a> of file <a class="el" href="batterychargermain-working_8c_source.html">batterychargermain-working.c</a>.</p>

</div>
</div>
<a class="anchor" id="a4fa00331e1f30a77a6c22295226a3e5f"></a><!-- doxytag: member="batterychargermain&#45;working.c::displayTask" ref="a4fa00331e1f30a77a6c22295226a3e5f" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void displayTask </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Display task. </p>
<p>Display and Data Capture task.</p>
<p>This task tests for user input via a hardware push button and manages the display of system variables and configuration of certain items. </p>

<p><p>Compute new buffer pointers and write to their location in EEPROM.</p>
<p>Compute a new end pointer that would hold after a data block is written. If we can't fit it into the end, put it at the start of the memory buffer. </p>
</p>

<p>Definition at line <a class="el" href="batterychargermain-working_8c_source.html#l00430">430</a> of file <a class="el" href="batterychargermain-working_8c_source.html">batterychargermain-working.c</a>.</p>

<p>References <a class="el" href="batterychargermain-faulty_8c_source.html#l01266">display()</a>, and <a class="el" href="batterychargermain-faulty_8c_source.html#l00153">scaledChannelValue</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<div class="center"><img src="batterychargermain-working_8c_a4fa00331e1f30a77a6c22295226a3e5f_cgraph.png" border="0" usemap="#batterychargermain-working_8c_a4fa00331e1f30a77a6c22295226a3e5f_cgraph_map" alt=""></div>
<map name="batterychargermain-working_8c_a4fa00331e1f30a77a6c22295226a3e5f_cgraph_map" id="batterychargermain-working_8c_a4fa00331e1f30a77a6c22295226a3e5f_cgraph">
<area shape="rect" href="batterychargermain-faulty_8c.html#a5f63e93affef46753d63308e74e09abe" title="Display a 32 bit value as decimal on the LCD." alt="" coords="145,5,207,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a191232e6a11e2e3ff418840dd0e96165"></a><!-- doxytag: member="batterychargermain&#45;working.c::initiateControlTask" ref="a191232e6a11e2e3ff418840dd0e96165" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void initiateControlTask </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Launch the Control task. </p>
<p>This task sets up the main tasks by initializing the EEPROM storage. When ready it initiates the tasks to run regularly and check the battery voltage. This task then terminates. </p>

<p><p>Setup the external EEPROM for storing the samples. The first 16 bytes are reserved for general control information which includes the buffer pointers needed to recover data when power fails. These pointers are held in locations 8 to 11. </p>
</p>

<p>Definition at line <a class="el" href="batterychargermain-working_8c_source.html#l00224">224</a> of file <a class="el" href="batterychargermain-working_8c_source.html">batterychargermain-working.c</a>.</p>

<p>References <a class="el" href="batterychargermain-faulty_8c_source.html#l00151">adcShift</a>, <a class="el" href="batterychargermain_8h_source.html#l00068">BUFFER_START</a>, <a class="el" href="batterychargermain-faulty_8c_source.html#l00142">bufferEndPointer</a>, <a class="el" href="batterychargermain-faulty_8c_source.html#l00141">bufferStartPointer</a>, <a class="el" href="batterychargermain-faulty_8c_source.html#l00091">controlDelayCounter</a>, <a class="el" href="batterychargermain-faulty_8c_source.html#l00379">controlTask()</a>, <a class="el" href="batterychargermain-faulty_8c_source.html#l00132">controlTaskID</a>, <a class="el" href="batterychargermain-faulty_8c_source.html#l00097">displayInterval</a>, <a class="el" href="batterychargermain-faulty_8c_source.html#l00410">displayTask()</a>, <a class="el" href="batterychargermain-faulty_8c_source.html#l00096">displayTaskCounter</a>, <a class="el" href="batterychargermain-faulty_8c_source.html#l00134">displayTaskID</a>, <a class="el" href="batterychargermain-faulty_8c_source.html#l00061">FALSE</a>, <a class="el" href="batterychargermain-faulty_8c_source.html#l00070">high</a>, <a class="el" href="batterychargermain-faulty_8c_source.html#l00149">localEEPROMDevice</a>, <a class="el" href="batterychargermain-faulty_8c_source.html#l00071">low</a>, <a class="el" href="batterychargermain-faulty_8c_source.html#l01293">setErrorCode()</a>, and <a class="el" href="batterychargermain_8h_source.html#l00129">WRITE_EEPROM_FAIL</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<div class="center"><img src="batterychargermain-working_8c_a191232e6a11e2e3ff418840dd0e96165_cgraph.png" border="0" usemap="#batterychargermain-working_8c_a191232e6a11e2e3ff418840dd0e96165_cgraph_map" alt=""></div>
<map name="batterychargermain-working_8c_a191232e6a11e2e3ff418840dd0e96165_cgraph_map" id="batterychargermain-working_8c_a191232e6a11e2e3ff418840dd0e96165_cgraph">
<area shape="rect" href="batterychargermain-faulty_8c.html#a3cf36f2c1a76081759b205461a58486b" title="Control task." alt="" coords="187,5,275,35"/><area shape="rect" href="batterychargermain-faulty_8c.html#a4fa00331e1f30a77a6c22295226a3e5f" title="Display and Data Capture task." alt="" coords="185,59,276,88"/><area shape="rect" href="batterychargermain-faulty_8c.html#a3a0f1749987e2d979e5216e045fe5fb2" title="Set the Error Code." alt="" coords="183,112,279,141"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="acc44d8087c0b66e42e09a8d11c8d612e"></a><!-- doxytag: member="batterychargermain&#45;working.c::inputPacketReceive" ref="acc44d8087c0b66e42e09a8d11c8d612e" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void inputPacketReceive </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>PC Communication Input task. </p>
<p>This task waits for an incoming character on the UART, and packages it up into a message.</p>
<p>Low level input interface errors are ignored and such characters are lost. The input state machine works through the packet stages as characters arrive. Parameters are read in and the syntax of the packet is checked. The packet data is stored in a buffer for later interpretation. Input is blocked when the packet has been fully read in. The buffer holds one single packet in full. This allows us to discard the packet when an error occurs. A circular buffer makes error recovery very difficult.</p>
<p>If an error occurs, the packetInState must be returned to IDLE but the input task must not be blocked.</p>
<p>The task never exits, but acts as a monitoring task that activates other tasks as appropriate. This task is not entered if the error or command processing tasks are active. If there are no incoming characters waiting, the task relinquishes. </p>

<p><ul>
<li>The idle state occurs on startup, after a command has been received fully, or when an error has occurred. When an IDLE character is received, it is echoed back if the current output is not processing anything. The sync state is terminated. The next state, SYNC, is entered. In any other case, usually flushing after an error, the character is ignored.</li>
</ul>
<ul>
<li>If a SYNC character is received, go to the COMMAND state. We can accept IDLE characters and ignore them, otherwise return to the IDLE state and flush all following characters (no error is generated)</li>
</ul>
<ul>
<li>The address+packet type tells us if the packet is addressed to us. Just accept any address for the moment until we get a means to find out who we are. The packet type is also ignored until we define more types.</li>
</ul>
<ul>
<li>If the byte count is zero (no parameters), terminate the packet, otherwise go on to the data phase.</li>
</ul>
<ul>
<li>Put the command aside and go to the data phase if more characters follow</li>
</ul>
<ul>
<li>In the DATA phase just dump everything to the buffer if it will fit. dataInByteCount points to the next location to add a byte.</li>
</ul>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000002">Todo:</a></b></dt><dd>We ignore the checksum for the moment </dd></dl>
<ul>
<li>EOM terminates the packet, and we should have an EOM character here. We can now start up the packet interpretation task, blocking any further input processing. If an error has occurred,the error task will unblock this. </li>
</ul>
</p>

<p>Definition at line <a class="el" href="batterychargermain-working_8c_source.html#l00999">999</a> of file <a class="el" href="batterychargermain-working_8c_source.html">batterychargermain-working.c</a>.</p>

<p>References <a class="el" href="batterychargermain_8h_source.html#l00082">ADDRESS</a>, <a class="el" href="batterychargermain_8h_source.html#l00086">CHECKSUM</a>, <a class="el" href="batterychargermain_8h_source.html#l00084">COMMAND</a>, <a class="el" href="batterychargermain_8h_source.html#l00121">COMMAND_SYNTAX</a>, <a class="el" href="batterychargermain_8h_source.html#l00044">DATA_BUFFER_SIZE</a>, <a class="el" href="batterychargermain_8h_source.html#l00085">DATA_PHASE</a>, <a class="el" href="batterychargermain-faulty_8c_source.html#l00112">dataInByteCount</a>, <a class="el" href="batterychargermain_8h_source.html#l00087">EOM</a>, <a class="el" href="batterychargermain_8h_source.html#l00092">EOM_CHAR</a>, <a class="el" href="batterychargermain-faulty_8c_source.html#l00061">FALSE</a>, <a class="el" href="batterychargermain-faulty_8c_source.html#l00070">high</a>, <a class="el" href="batterychargermain_8h_source.html#l00080">IDLE</a>, <a class="el" href="batterychargermain_8h_source.html#l00090">IDLE_CHAR</a>, <a class="el" href="batterychargermain-faulty_8c_source.html#l00114">inputBuffer</a>, <a class="el" href="batterychargermain-faulty_8c_source.html#l00113">inputCommand</a>, <a class="el" href="batterychargermain-faulty_8c_source.html#l00105">lastError</a>, <a class="el" href="batterychargermain_8h_source.html#l00083">NUMBER_BYTES</a>, <a class="el" href="batterychargermain-faulty_8c_source.html#l00111">numberInBytes</a>, <a class="el" href="batterychargermain-faulty_8c_source.html#l00120">numberOutBytes</a>, <a class="el" href="batterychargermain-faulty_8c_source.html#l00123">outputBuffer</a>, <a class="el" href="batterychargermain-faulty_8c_source.html#l00118">outputBusy</a>, <a class="el" href="batterychargermain-faulty_8c_source.html#l00110">packetInState</a>, <a class="el" href="batterychargermain-faulty_8c_source.html#l00511">processCommand()</a>, <a class="el" href="batterychargermain-faulty_8c_source.html#l00129">processCommandID</a>, <a class="el" href="batterychargermain-faulty_8c_source.html#l00487">processError()</a>, <a class="el" href="batterychargermain-faulty_8c_source.html#l00130">processErrorID</a>, <a class="el" href="batterychargermain_8h_source.html#l00081">SYNC</a>, <a class="el" href="batterychargermain_8h_source.html#l00091">SYNC_CHAR</a>, and <a class="el" href="batterychargermain-faulty_8c_source.html#l00104">uartInput</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<div class="center"><img src="batterychargermain-working_8c_acc44d8087c0b66e42e09a8d11c8d612e_cgraph.png" border="0" usemap="#batterychargermain-working_8c_acc44d8087c0b66e42e09a8d11c8d612e_cgraph_map" alt=""></div>
<map name="batterychargermain-working_8c_acc44d8087c0b66e42e09a8d11c8d612e_cgraph_map" id="batterychargermain-working_8c_acc44d8087c0b66e42e09a8d11c8d612e_cgraph">
<area shape="rect" href="batterychargermain-faulty_8c.html#a205d394554b7ed3eba57e98560bd63d6" title="Input Packet Interpretation Processing task." alt="" coords="191,5,316,35"/><area shape="rect" href="batterychargermain-faulty_8c.html#a28016e2edd199b39d8f2d9e91e2f0b9b" title="Error Processing task." alt="" coords="205,59,301,88"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a6265f456d8af4a996aefb1e29b8ce6a4"></a><!-- doxytag: member="batterychargermain&#45;working.c::ISR" ref="a6265f456d8af4a996aefb1e29b8ce6a4" args="(SIG_OVERFLOW0)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ISR </td>
          <td>(</td>
          <td class="paramtype">SIG_OVERFLOW0&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Timer 0 ISR. </p>
<p>This ISR updates the RTC time, and reschedules any tasks that have been suspended pending a timeout interval. It also manages the counters that can schedule tasks according to the program functions.</p>
<p>The counters are decremented and a task restart operation occurs when they reach zero. Reset the counter here if the operation is repetitive. </p>

<p>Definition at line <a class="el" href="batterychargermain-working_8c_source.html#l01169">1169</a> of file <a class="el" href="batterychargermain-working_8c_source.html">batterychargermain-working.c</a>.</p>

<p>References <a class="el" href="batterychargermain-faulty_8c_source.html#l00091">controlDelayCounter</a>, <a class="el" href="batterychargermain-faulty_8c_source.html#l00132">controlTaskID</a>, <a class="el" href="batterychargermain-faulty_8c_source.html#l00097">displayInterval</a>, <a class="el" href="batterychargermain-faulty_8c_source.html#l00410">displayTask()</a>, <a class="el" href="batterychargermain-faulty_8c_source.html#l00096">displayTaskCounter</a>, <a class="el" href="batterychargermain-faulty_8c_source.html#l00134">displayTaskID</a>, <a class="el" href="batterychargermain-faulty_8c.html#a85f9d04fa58cdbb8d366d1d238df2298">time</a>, <a class="el" href="batterychargermain-faulty_8c_source.html#l00081">timeUnion::timeValue</a>, and <a class="el" href="batterychargermain-faulty_8c_source.html#l00060">TRUE</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<div class="center"><img src="batterychargermain-working_8c_a6265f456d8af4a996aefb1e29b8ce6a4_cgraph.png" border="0" usemap="#batterychargermain-working_8c_a6265f456d8af4a996aefb1e29b8ce6a4_cgraph_map" alt=""></div>
<map name="batterychargermain-working_8c_a6265f456d8af4a996aefb1e29b8ce6a4_cgraph_map" id="batterychargermain-working_8c_a6265f456d8af4a996aefb1e29b8ce6a4_cgraph">
<area shape="rect" href="batterychargermain-faulty_8c.html#a4fa00331e1f30a77a6c22295226a3e5f" title="Display and Data Capture task." alt="" coords="99,5,189,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a840291bc02cba5474a4cb46a9b9566fe"></a><!-- doxytag: member="batterychargermain&#45;working.c::main" ref="a840291bc02cba5474a4cb46a9b9566fe" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int main </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Main Program. </p>

<p><p>This sets up the interfaces for EEPROM and RTC</p>
<p>Initialise some variables</p>
<p>Setup the I/O ports, ADC, TWI, timer and LCD.</p>
<p>Initialize the UART library, pass the baudrate and avr cpu clock (uses the macro UART_BAUD_SELECT()). Set the baudrate to a predefined value.</p>
<p>Enable interrupts, since the UART library is interrupt controlled.</p>
<p>Set input and output state variables to their idle state.</p>
<p>Initialise the OS stuff, setup the control and receive tasks, and jump to the OS. The control task must be initiated first. </p>
</p>

<p>Definition at line <a class="el" href="batterychargermain-working_8c_source.html#l00161">161</a> of file <a class="el" href="batterychargermain-working_8c_source.html">batterychargermain-working.c</a>.</p>

<p>References <a class="el" href="batterychargermain_8h_source.html#l00051">ADC_MODE</a>, <a class="el" href="batterychargermain_8h_source.html#l00052">ADC_SPEED</a>, <a class="el" href="batterychargermain_8h_source.html#l00147">BAUDRATE</a>, <a class="el" href="batterychargermain_8c_source.html#l01327">configurePorts()</a>, <a class="el" href="batterychargermain_8c_source.html#l01358">connectLoad()</a>, <a class="el" href="batterychargermain_8h_source.html#l00062">EEPROM_END</a>, <a class="el" href="batterychargermain-faulty_8c_source.html#l00150">eepromEnd</a>, <a class="el" href="batterychargermain-faulty_8c_source.html#l00061">FALSE</a>, <a class="el" href="batterychargermain_8h_source.html#l00080">IDLE</a>, <a class="el" href="batterychargermain-faulty_8c_source.html#l00223">initiateControlTask()</a>, <a class="el" href="batterychargermain-faulty_8c_source.html#l00131">initiateControlTaskID</a>, <a class="el" href="batterychargermain-faulty_8c_source.html#l01029">inputPacketReceive()</a>, <a class="el" href="batterychargermain-faulty_8c_source.html#l00127">inputPacketReceiveID</a>, <a class="el" href="batterychargermain-faulty_8c_source.html#l00105">lastError</a>, <a class="el" href="batterychargermain_8h_source.html#l00061">LOCAL_EEPROM_DEVICE</a>, <a class="el" href="batterychargermain-faulty_8c_source.html#l00149">localEEPROMDevice</a>, <a class="el" href="batterychargermain_8h_source.html#l00095">NO_COMMAND</a>, <a class="el" href="batterychargermain_8h_source.html#l00120">NO_ERROR</a>, <a class="el" href="batterychargermain_8c_source.html#l01342">openPanel()</a>, <a class="el" href="batterychargermain-faulty_8c_source.html#l00118">outputBusy</a>, <a class="el" href="batterychargermain-faulty_8c_source.html#l00122">outputCommand</a>, <a class="el" href="batterychargermain-faulty_8c_source.html#l00110">packetInState</a>, <a class="el" href="batterychargermain-faulty_8c_source.html#l00119">packetOutState</a>, <a class="el" href="batterychargermain_8h_source.html#l00058">RTC_SCALE</a>, <a class="el" href="batterychargermain-faulty_8c_source.html#l00148">rtcScale</a>, <a class="el" href="batterychargermain-faulty_8c_source.html#l01293">setErrorCode()</a>, <a class="el" href="batterychargermain-faulty_8c.html#a85f9d04fa58cdbb8d366d1d238df2298">time</a>, <a class="el" href="batterychargermain-faulty_8c_source.html#l00081">timeUnion::timeValue</a>, and <a class="el" href="batterychargermain_8h_source.html#l00053">TWI_SPEED</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<div class="center"><img src="batterychargermain-working_8c_a840291bc02cba5474a4cb46a9b9566fe_cgraph.png" border="0" usemap="#batterychargermain-working_8c_a840291bc02cba5474a4cb46a9b9566fe_cgraph_map" alt=""></div>
<map name="batterychargermain-working_8c_a840291bc02cba5474a4cb46a9b9566fe_cgraph_map" id="batterychargermain-working_8c_a840291bc02cba5474a4cb46a9b9566fe_cgraph">
<area shape="rect" href="group__Board.html#gae8468abafca592176f2b75294fd35132" title="Configure the ports to match hardware." alt="" coords="120,5,224,35"/><area shape="rect" href="group__Board.html#gad6b6b32ba01b85512eda6df9a5503b07" title="Port B output 1 when low will connect the battery to the load." alt="" coords="124,59,220,88"/><area shape="rect" href="batterychargermain-faulty_8c.html#a191232e6a11e2e3ff418840dd0e96165" title="Launch the Control task." alt="" coords="108,112,236,141"/><area shape="rect" href="batterychargermain-faulty_8c.html#acc44d8087c0b66e42e09a8d11c8d612e" title="PC Communication Input task." alt="" coords="104,165,240,195"/><area shape="rect" href="group__Board.html#gaf3ffcbf6810151d25d3bd59d1c9368a6" title="Port B output 0 when high will open the panel for charging." alt="" coords="132,219,212,248"/><area shape="rect" href="batterychargermain-faulty_8c.html#a3a0f1749987e2d979e5216e045fe5fb2" title="Set the Error Code." alt="" coords="124,272,220,301"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="aa64a0693168a30814f9304c373e0340c"></a><!-- doxytag: member="batterychargermain&#45;working.c::measurementTask" ref="aa64a0693168a30814f9304c373e0340c" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void measurementTask </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Measurement task. </p>
<p>This task measures the voltages and currents from the A/D converters, and scales them according to the calibrated values in the internal EEPROM block. </p>

<p><p>In the event of an error, we will not add in any measured value, but we must be able to account for the missing elements. We do this by keeping a count of errored values, and when we get a good value, fill in the previous missing values with multiple copies of it. Such errors are never signalled back.</p>
<p>The summed results need to be scaled back to 10 bits to match the A/D precision.</p>
<p>The scaled result according to calibration is also stored for display. </p>
</p>

<p>Definition at line <a class="el" href="batterychargermain-working_8c_source.html#l00276">276</a> of file <a class="el" href="batterychargermain-working_8c_source.html">batterychargermain-working.c</a>.</p>

<p>References <a class="el" href="batterychargermain-faulty_8c_source.html#l00063">_BV</a>, <a class="el" href="batterychargermain_8c_source.html#l00283">adcErrorCount</a>, <a class="el" href="batterychargermain-faulty_8c_source.html#l00151">adcShift</a>, <a class="el" href="batterychargermain_8c_source.html#l00280">channel</a>, <a class="el" href="batterychargermain_8c_source.html#l00279">channelStart</a>, <a class="el" href="batterychargermain_8c_source.html#l00282">channelSum</a>, <a class="el" href="batterychargermain-faulty_8c_source.html#l00152">channelValue</a>, <a class="el" href="batterychargermain-faulty_8c_source.html#l00132">controlTaskID</a>, <a class="el" href="batterychargermain-faulty_8c_source.html#l00061">FALSE</a>, <a class="el" href="batterychargermain_8c_source.html#l00278">numberChannels</a>, <a class="el" href="batterychargermain-faulty_8c_source.html#l01237">rescale()</a>, <a class="el" href="batterychargermain_8c_source.html#l00284">sampleCount</a>, and <a class="el" href="batterychargermain-faulty_8c_source.html#l00153">scaledChannelValue</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<div class="center"><img src="batterychargermain-working_8c_aa64a0693168a30814f9304c373e0340c_cgraph.png" border="0" usemap="#batterychargermain-working_8c_aa64a0693168a30814f9304c373e0340c_cgraph_map" alt=""></div>
<map name="batterychargermain-working_8c_aa64a0693168a30814f9304c373e0340c_cgraph_map" id="batterychargermain-working_8c_aa64a0693168a30814f9304c373e0340c_cgraph">
<area shape="rect" href="batterychargermain-faulty_8c.html#ab54b3bf861d0d10e37596e01b486fa88" title="Scale a measured A/D quantity." alt="" coords="181,5,245,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a76390f69852e64ce7f47a441f0b04b49"></a><!-- doxytag: member="batterychargermain&#45;working.c::outputPacketSend" ref="a76390f69852e64ce7f47a441f0b04b49" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void outputPacketSend </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>PC Communication Output task. </p>
<p>This task transmits any characters found to be in the output buffer. Normally it is not activated until an entire message is ready to go.</p>
<p>Check for an active output command. If none, but an error is signalled, send error message. Each command requires a response so a packet is generated. Use a state machine to work through the stages when output buffer is free.</p>
<p>The task exits after the message has been sent. </p>

<p>Definition at line <a class="el" href="batterychargermain-working_8c_source.html#l01098">1098</a> of file <a class="el" href="batterychargermain-working_8c_source.html">batterychargermain-working.c</a>.</p>

<p>References <a class="el" href="batterychargermain_8h_source.html#l00082">ADDRESS</a>, <a class="el" href="batterychargermain_8h_source.html#l00086">CHECKSUM</a>, <a class="el" href="batterychargermain-faulty_8c_source.html#l00106">checkSum</a>, <a class="el" href="batterychargermain_8h_source.html#l00084">COMMAND</a>, <a class="el" href="batterychargermain_8h_source.html#l00085">DATA_PHASE</a>, <a class="el" href="batterychargermain-faulty_8c_source.html#l00121">dataOutByteCount</a>, <a class="el" href="batterychargermain_8h_source.html#l00087">EOM</a>, <a class="el" href="batterychargermain_8h_source.html#l00092">EOM_CHAR</a>, <a class="el" href="batterychargermain-faulty_8c_source.html#l00061">FALSE</a>, <a class="el" href="batterychargermain_8h_source.html#l00080">IDLE</a>, <a class="el" href="batterychargermain_8h_source.html#l00090">IDLE_CHAR</a>, <a class="el" href="batterychargermain_8h_source.html#l00095">NO_COMMAND</a>, <a class="el" href="batterychargermain_8h_source.html#l00083">NUMBER_BYTES</a>, <a class="el" href="batterychargermain-faulty_8c_source.html#l00120">numberOutBytes</a>, <a class="el" href="batterychargermain-faulty_8c_source.html#l00123">outputBuffer</a>, <a class="el" href="batterychargermain-faulty_8c_source.html#l00118">outputBusy</a>, <a class="el" href="batterychargermain-faulty_8c_source.html#l00122">outputCommand</a>, <a class="el" href="batterychargermain-faulty_8c_source.html#l00119">packetOutState</a>, <a class="el" href="batterychargermain_8h_source.html#l00081">SYNC</a>, <a class="el" href="batterychargermain_8h_source.html#l00091">SYNC_CHAR</a>, and <a class="el" href="batterychargermain-faulty_8c_source.html#l00060">TRUE</a>.</p>

</div>
</div>
<a class="anchor" id="a205d394554b7ed3eba57e98560bd63d6"></a><!-- doxytag: member="batterychargermain&#45;working.c::processCommand" ref="a205d394554b7ed3eba57e98560bd63d6" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void processCommand </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Input Packet Interpretation Processing task. </p>
<p>This is where the command interpretation is done, causing a number of tasks to be initiated. The task is scheduled when the input data buffer has something in it. The input buffer has the parameters and the data following. Use a state machine approach as it gives simpler code.</p>
<p>Wait until all pending Input and Output processes are complete.</p>
<p>For each command, the number of expected parameters is checked in some way. </p>

<p><ul>
<li><em>Unit Information Block Access data.</em> No parameters. This command returns the address of the start of the information block, its length and the size of the largest block that can be transferred. Following this is the unit ID read from the on-board switches.</li>
</ul>
<ul>
<li><em> Read Internal EEPROM Memory.</em> Parameters: two byte address to access data, and number of data bytes to be read, accounting for limits. This command returns the contents of a block of internal EEPROM memory.</li>
</ul>
<ul>
<li><em> Write Internal EEPROM Memory.</em> Parameters: two byte address to access data, followed by all data bytes to be written. Expect at least 1 and no more than DATA_BUFFER_SIZE-3 data bytes to follow. This command writes the contents of a block of internal EEPROM memory.</li>
</ul>
<ul>
<li><em> Read External EEPROM.</em> Parameters: two byte address to access data followed by device address of external EEPROM, and the number of data bytes to be read, accounting for limits. This command returns the contents of a block of external EEPROM memory. The variable eepromCount contains the number of bytes to be read from the EEPROM. The twiSetupTransaction, twiWriteByte functions are nonblocking.</li>
</ul>
<ul>
<li><em> Write External EEPROM command.</em> Parameters: address to access data, followed by device ID and number of bytes and all data bytes to be written. This command writes the contents of a block of external EEPROM memory. Expect at least 1 and no more than DATA_BUFFER_SIZE-4 data bytes to follow.</li>
</ul>
<ul>
<li><em> Initiate a single A/D conversion.</em> One single A/D conversion is done. Parameters: channel number, Gain (not used). Result: Timer 4 bytes, A/D result 2 bytes.</li>
</ul>
<ul>
<li><em> Return Data Block of Current State.</em></li>
</ul>
<p>Parameters: none. Result: Length in bytes of data block A block of internal state variables selected according to application. In this case, four averaged A/D measurements, 2 bytes each, unscaled.</p>
<ul>
<li><em> Reset the circular buffer pointers.</em></li>
</ul>
<p>This command returns the buffer start and end pointers, then sets the start pointer to the end pointer. This effectively sets the buffer to empty. The calling program is then expected to immediately read in all data between the old start and end pointers to ensure that nothing is overwritten. Parameters: none. Result: none.</p>
<ul>
<li><em> Reset the Real Time Clock.</em> No parameters.</li>
</ul>
<ul>
<li><em> Jump to the bootloader.</em> This command causes the program to transfer control to the bootloader. Its purpose is to enable firmware uploads at any time. For the AVR MCU this is done by setting the MCU watchdog timer for the shortest period, and continuing its business. A watchdog timer reset will occur pushing it into the bootloader where the wdt will be disabled. This is unsatisfactory but necessary as the compiler could not handle a long jump.</li>
</ul>
<ul>
<li><em> Command not recognized.</em> Returns an error code.</li>
</ul>
<p>If an error occurred, launch the error processing task, else launch the output transmission task. Follow by rescheduling the suspended receive task. </p>
</p>

<p>Definition at line <a class="el" href="batterychargermain-working_8c_source.html#l00484">484</a> of file <a class="el" href="batterychargermain-working_8c_source.html">batterychargermain-working.c</a>.</p>

<p>References <a class="el" href="batterychargermain_8h_source.html#l00131">ADC_FAILURE</a>, <a class="el" href="batterychargermain_8h_source.html#l00107">ADC_ONCE</a>, <a class="el" href="batterychargermain_8h_source.html#l00130">ADC_SYNTAX</a>, <a class="el" href="batterychargermain-faulty_8c_source.html#l00140">adcChannel</a>, <a class="el" href="batterychargermain-faulty_8c_source.html#l00139">address</a>, <a class="el" href="batterychargermain_8h_source.html#l00136">BOOT_SYNTAX</a>, <a class="el" href="batterychargermain_8h_source.html#l00112">BOOTLOADER_JUMP</a>, <a class="el" href="batterychargermain-faulty_8c_source.html#l00142">bufferEndPointer</a>, <a class="el" href="batterychargermain-faulty_8c_source.html#l00141">bufferStartPointer</a>, <a class="el" href="batterychargermain-faulty_8c_source.html#l00068">cbi</a>, <a class="el" href="batterychargermain_8c_source.html#l00280">channel</a>, <a class="el" href="batterychargermain-faulty_8c_source.html#l00152">channelValue</a>, <a class="el" href="batterychargermain_8h_source.html#l00116">CLEAR_PORT_BIT</a>, <a class="el" href="batterychargermain_8h_source.html#l00044">DATA_BUFFER_SIZE</a>, <a class="el" href="batterychargermain-faulty_8c_source.html#l00138">eepromCount</a>, <a class="el" href="batterychargermain_8h_source.html#l00038">F_CPU</a>, <a class="el" href="batterychargermain-faulty_8c_source.html#l00061">FALSE</a>, <a class="el" href="batterychargermain-faulty_8c_source.html#l00070">high</a>, <a class="el" href="batterychargermain-faulty_8c_source.html#l00064">inb</a>, <a class="el" href="batterychargermain_8h_source.html#l00065">INF_BLOCK_START</a>, <a class="el" href="batterychargermain-faulty_8c_source.html#l00114">inputBuffer</a>, <a class="el" href="batterychargermain-faulty_8c_source.html#l00113">inputCommand</a>, <a class="el" href="batterychargermain-faulty_8c_source.html#l00127">inputPacketReceiveID</a>, <a class="el" href="batterychargermain-faulty_8c_source.html#l00105">lastError</a>, <a class="el" href="batterychargermain-faulty_8c_source.html#l00071">low</a>, <a class="el" href="batterychargermain_8h_source.html#l00120">NO_ERROR</a>, <a class="el" href="batterychargermain_8h_source.html#l00144">NO_PORT</a>, <a class="el" href="batterychargermain-faulty_8c_source.html#l00111">numberInBytes</a>, <a class="el" href="batterychargermain-faulty_8c_source.html#l00120">numberOutBytes</a>, <a class="el" href="batterychargermain-faulty_8c_source.html#l00123">outputBuffer</a>, <a class="el" href="batterychargermain-faulty_8c_source.html#l00118">outputBusy</a>, <a class="el" href="batterychargermain-faulty_8c_source.html#l00122">outputCommand</a>, <a class="el" href="batterychargermain-faulty_8c_source.html#l01128">outputPacketSend()</a>, <a class="el" href="batterychargermain-faulty_8c_source.html#l00128">outputPacketSendID</a>, <a class="el" href="batterychargermain-faulty_8c_source.html#l00487">processError()</a>, <a class="el" href="batterychargermain_8h_source.html#l00100">READ_EEPROM</a>, <a class="el" href="batterychargermain_8h_source.html#l00128">READ_EEPROM_FAIL</a>, <a class="el" href="batterychargermain_8h_source.html#l00126">READ_EEPROM_SYNTAX</a>, <a class="el" href="batterychargermain_8h_source.html#l00098">READ_MEMORY</a>, <a class="el" href="batterychargermain_8h_source.html#l00124">READ_MEMORY_SYNTAX</a>, <a class="el" href="batterychargermain_8h_source.html#l00117">READ_PORT</a>, <a class="el" href="batterychargermain_8h_source.html#l00143">READ_PORT_SYNTAX</a>, <a class="el" href="batterychargermain_8h_source.html#l00113">READ_SRAM</a>, <a class="el" href="batterychargermain_8h_source.html#l00140">READ_SRAM_SYNTAX</a>, <a class="el" href="batterychargermain_8h_source.html#l00102">RESET_BUFFER_POINTERS</a>, <a class="el" href="batterychargermain_8h_source.html#l00132">RESET_BUFFER_POINTERS_SYNTAX</a>, <a class="el" href="batterychargermain_8h_source.html#l00103">RESET_CLOCK</a>, <a class="el" href="batterychargermain_8h_source.html#l00133">RESET_CLOCK_SYNTAX</a>, <a class="el" href="batterychargermain-faulty_8c_source.html#l00148">rtcScale</a>, <a class="el" href="batterychargermain-faulty_8c_source.html#l00069">sbi</a>, <a class="el" href="batterychargermain_8h_source.html#l00115">SET_PORT_BIT</a>, <a class="el" href="batterychargermain_8h_source.html#l00139">STATE_VARIABLE_SYNTAX</a>, <a class="el" href="batterychargermain_8h_source.html#l00111">STATE_VARIABLES</a>, <a class="el" href="batterychargermain_8h_source.html#l00105">SUCCESS_COMMAND</a>, <a class="el" href="batterychargermain-faulty_8c.html#a85f9d04fa58cdbb8d366d1d238df2298">time</a>, <a class="el" href="batterychargermain-faulty_8c_source.html#l00082">timeUnion::timeByte</a>, <a class="el" href="batterychargermain-faulty_8c_source.html#l00081">timeUnion::timeValue</a>, <a class="el" href="batterychargermain_8h_source.html#l00097">UNIT_INF_ACCESS</a>, <a class="el" href="batterychargermain_8h_source.html#l00134">UNIT_INF_ACCESS_SYNTAX</a>, <a class="el" href="batterychargermain_8h_source.html#l00122">UNKNOWN_COMMAND</a>, <a class="el" href="batterychargermain_8h_source.html#l00101">WRITE_EEPROM</a>, <a class="el" href="batterychargermain_8h_source.html#l00129">WRITE_EEPROM_FAIL</a>, <a class="el" href="batterychargermain_8h_source.html#l00127">WRITE_EEPROM_SYNTAX</a>, <a class="el" href="batterychargermain_8h_source.html#l00099">WRITE_MEMORY</a>, and <a class="el" href="batterychargermain_8h_source.html#l00125">WRITE_MEMORY_SYNTAX</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<div class="center"><img src="batterychargermain-working_8c_a205d394554b7ed3eba57e98560bd63d6_cgraph.png" border="0" usemap="#batterychargermain-working_8c_a205d394554b7ed3eba57e98560bd63d6_cgraph_map" alt=""></div>
<map name="batterychargermain-working_8c_a205d394554b7ed3eba57e98560bd63d6_cgraph_map" id="batterychargermain-working_8c_a205d394554b7ed3eba57e98560bd63d6_cgraph">
<area shape="rect" href="batterychargermain-faulty_8c.html#a76390f69852e64ce7f47a441f0b04b49" title="PC Communication Output task." alt="" coords="181,5,309,35"/><area shape="rect" href="batterychargermain-faulty_8c.html#a28016e2edd199b39d8f2d9e91e2f0b9b" title="Error Processing task." alt="" coords="197,59,293,88"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a28016e2edd199b39d8f2d9e91e2f0b9b"></a><!-- doxytag: member="batterychargermain&#45;working.c::processError" ref="a28016e2edd199b39d8f2d9e91e2f0b9b" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void processError </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Error Processing task. </p>
<p>If an error has occurred, reset the input buffer and build an error message to be output. Wait for any output processing to finish. Input processing continues but not packet interpretation.</p>
<p>The program can place any number of explanatory bytes in the output buffer from location 1 onwards, setting numberBytes to the number of additional bytes. This is incremented again to cover the additional error code at location 0.</p>
<p>The task completes processing of the command and exits. It is activated by the input task when a message has been received. </p>

<p>Definition at line <a class="el" href="batterychargermain-working_8c_source.html#l00460">460</a> of file <a class="el" href="batterychargermain-working_8c_source.html">batterychargermain-working.c</a>.</p>

<p>References <a class="el" href="batterychargermain_8h_source.html#l00104">ERROR_COMMAND</a>, <a class="el" href="batterychargermain-faulty_8c_source.html#l00061">FALSE</a>, <a class="el" href="batterychargermain-faulty_8c_source.html#l00127">inputPacketReceiveID</a>, <a class="el" href="batterychargermain-faulty_8c_source.html#l00105">lastError</a>, <a class="el" href="batterychargermain_8h_source.html#l00120">NO_ERROR</a>, <a class="el" href="batterychargermain-faulty_8c_source.html#l00120">numberOutBytes</a>, <a class="el" href="batterychargermain-faulty_8c_source.html#l00123">outputBuffer</a>, <a class="el" href="batterychargermain-faulty_8c_source.html#l00118">outputBusy</a>, <a class="el" href="batterychargermain-faulty_8c_source.html#l00122">outputCommand</a>, <a class="el" href="batterychargermain-faulty_8c_source.html#l01128">outputPacketSend()</a>, and <a class="el" href="batterychargermain-faulty_8c_source.html#l00128">outputPacketSendID</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<div class="center"><img src="batterychargermain-working_8c_a28016e2edd199b39d8f2d9e91e2f0b9b_cgraph.png" border="0" usemap="#batterychargermain-working_8c_a28016e2edd199b39d8f2d9e91e2f0b9b_cgraph_map" alt=""></div>
<map name="batterychargermain-working_8c_a28016e2edd199b39d8f2d9e91e2f0b9b_cgraph_map" id="batterychargermain-working_8c_a28016e2edd199b39d8f2d9e91e2f0b9b_cgraph">
<area shape="rect" href="batterychargermain-faulty_8c.html#a76390f69852e64ce7f47a441f0b04b49" title="PC Communication Output task." alt="" coords="149,5,277,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ab54b3bf861d0d10e37596e01b486fa88"></a><!-- doxytag: member="batterychargermain&#45;working.c::rescale" ref="ab54b3bf861d0d10e37596e01b486fa88" args="(const int quantity, const int multiplier, const int offset)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">long rescale </td>
          <td>(</td>
          <td class="paramtype">const int&nbsp;</td>
          <td class="paramname"> <em>quantity</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&nbsp;</td>
          <td class="paramname"> <em>multiplier</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&nbsp;</td>
          <td class="paramname"> <em>offset</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Scale a measured A/D quantity. </p>
<p>The version of gcc used doesn't correctly multiply two 16 bit numbers to give a 32 bit result, but truncates it. This performs the necessary scaling by working out the 16 bit products of the 8 two 8 bit parts, then combining the necessary shift of 10 bits into the shifts needed to renormalize the products. The result is a 16 bit scaled result with the offset added. </p>

<p>Definition at line <a class="el" href="batterychargermain-working_8c_source.html#l01208">1208</a> of file <a class="el" href="batterychargermain-working_8c_source.html">batterychargermain-working.c</a>.</p>

<p>References <a class="el" href="batterychargermain-faulty_8c_source.html#l00070">high</a>, and <a class="el" href="batterychargermain-faulty_8c_source.html#l00071">low</a>.</p>

</div>
</div>
<a class="anchor" id="a3a0f1749987e2d979e5216e045fe5fb2"></a><!-- doxytag: member="batterychargermain&#45;working.c::setErrorCode" ref="a3a0f1749987e2d979e5216e045fe5fb2" args="(const unsigned int code)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void setErrorCode </td>
          <td>(</td>
          <td class="paramtype">const unsigned int&nbsp;</td>
          <td class="paramname"> <em>code</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Set the Error Code. </p>
<p>An error code is set in the internal EEPROM for access by a monitor. An LED state is modified to indicate presence of an error. A message is displayed on the LCD screen with the code. </p>

<p>Definition at line <a class="el" href="batterychargermain-working_8c_source.html#l01264">1264</a> of file <a class="el" href="batterychargermain-working_8c_source.html">batterychargermain-working.c</a>.</p>

<p>References <a class="el" href="batterychargermain_8c_source.html#l01382">offLED()</a>, and <a class="el" href="batterychargermain_8c_source.html#l01374">onLED()</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<div class="center"><img src="batterychargermain-working_8c_a3a0f1749987e2d979e5216e045fe5fb2_cgraph.png" border="0" usemap="#batterychargermain-working_8c_a3a0f1749987e2d979e5216e045fe5fb2_cgraph_map" alt=""></div>
<map name="batterychargermain-working_8c_a3a0f1749987e2d979e5216e045fe5fb2_cgraph_map" id="batterychargermain-working_8c_a3a0f1749987e2d979e5216e045fe5fb2_cgraph">
<area shape="rect" href="group__Board.html#ga05d5c098157944c524536014c04450bc" title="Port B output 2 when high will turn on a LED." alt="" coords="152,5,213,35"/><area shape="rect" href="group__Board.html#ga86980aa118e8cc1e123632b17ce5cdcd" title="Port B output 1 when low will turn off a LED." alt="" coords="153,59,212,88"/></map>
</div>
</p>

</div>
</div>
<hr/><h2>Variable Documentation</h2>
<a class="anchor" id="a4cda2ae0c5ac82065b23cadd4843a34b"></a><!-- doxytag: member="batterychargermain&#45;working.c::adcChannel" ref="a4cda2ae0c5ac82065b23cadd4843a34b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile uint8_t <a class="el" href="batterychargermain_8c.html#a4cda2ae0c5ac82065b23cadd4843a34b">adcChannel</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Channel to be converted </p>

<p>Definition at line <a class="el" href="batterychargermain-working_8c_source.html#l00142">142</a> of file <a class="el" href="batterychargermain-working_8c_source.html">batterychargermain-working.c</a>.</p>

</div>
</div>
<a class="anchor" id="aa516e61498dcae2094210826c2237a3b"></a><!-- doxytag: member="batterychargermain&#45;working.c::adcControlByte" ref="aa516e61498dcae2094210826c2237a3b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile uint8_t <a class="el" href="batterychargermain_8c.html#aa516e61498dcae2094210826c2237a3b">adcControlByte</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Mask for channels to be converted </p>

<p>Definition at line <a class="el" href="batterychargermain-working_8c_source.html#l00141">141</a> of file <a class="el" href="batterychargermain-working_8c_source.html">batterychargermain-working.c</a>.</p>

</div>
</div>
<a class="anchor" id="af35d731629179ecb297e5def70670325"></a><!-- doxytag: member="batterychargermain&#45;working.c::adcShift" ref="af35d731629179ecb297e5def70670325" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile uint8_t <a class="el" href="batterychargermain_8c.html#af35d731629179ecb297e5def70670325">adcShift</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="batterychargermain-working_8c_source.html#l00154">154</a> of file <a class="el" href="batterychargermain-working_8c_source.html">batterychargermain-working.c</a>.</p>

</div>
</div>
<a class="anchor" id="a018f44092d5516aa365fb05a5fae454d"></a><!-- doxytag: member="batterychargermain&#45;working.c::address" ref="a018f44092d5516aa365fb05a5fae454d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const uint8_t* <a class="el" href="batterychargermain_8c.html#a34f0a33ecf7ba413f777ff0454130ac0">address</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Address for EEPROM access </p>

<p>Definition at line <a class="el" href="batterychargermain-working_8c_source.html#l00140">140</a> of file <a class="el" href="batterychargermain-working_8c_source.html">batterychargermain-working.c</a>.</p>

</div>
</div>
<a class="anchor" id="af5b0f876a699a5120b609786eda6b836"></a><!-- doxytag: member="batterychargermain&#45;working.c::bufferEndPointer" ref="af5b0f876a699a5120b609786eda6b836" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile uint16_t <a class="el" href="batterychargermain_8c.html#af5b0f876a699a5120b609786eda6b836">bufferEndPointer</a> = BUFFER_START</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Data buffer pointer </p>

<p>Definition at line <a class="el" href="batterychargermain-working_8c_source.html#l00144">144</a> of file <a class="el" href="batterychargermain-working_8c_source.html">batterychargermain-working.c</a>.</p>

</div>
</div>
<a class="anchor" id="a3b1f082715ab0cb6aad27fdec1e0bbd5"></a><!-- doxytag: member="batterychargermain&#45;working.c::bufferStartPointer" ref="a3b1f082715ab0cb6aad27fdec1e0bbd5" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile uint16_t <a class="el" href="batterychargermain_8c.html#a3b1f082715ab0cb6aad27fdec1e0bbd5">bufferStartPointer</a> = BUFFER_START</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Data buffer pointer </p>

<p>Definition at line <a class="el" href="batterychargermain-working_8c_source.html#l00143">143</a> of file <a class="el" href="batterychargermain-working_8c_source.html">batterychargermain-working.c</a>.</p>

</div>
</div>
<a class="anchor" id="aa98c853e40224609bfb1150530123d7f"></a><!-- doxytag: member="batterychargermain&#45;working.c::channelValue" ref="aa98c853e40224609bfb1150530123d7f" args="[4]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile uint16_t <a class="el" href="batterychargermain_8c.html#aa98c853e40224609bfb1150530123d7f">channelValue</a>[4]</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="batterychargermain-working_8c_source.html#l00155">155</a> of file <a class="el" href="batterychargermain-working_8c_source.html">batterychargermain-working.c</a>.</p>

</div>
</div>
<a class="anchor" id="a9ef2a152a03697ad9fbba040d523d6f7"></a><!-- doxytag: member="batterychargermain&#45;working.c::checkSum" ref="a9ef2a152a03697ad9fbba040d523d6f7" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile uint8_t <a class="el" href="batterychargermain_8c.html#a9ef2a152a03697ad9fbba040d523d6f7">checkSum</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Checksum on message contents </p>

<p>Definition at line <a class="el" href="batterychargermain-working_8c_source.html#l00107">107</a> of file <a class="el" href="batterychargermain-working_8c_source.html">batterychargermain-working.c</a>.</p>

</div>
</div>
<a class="anchor" id="acd768ec37d82f6e62016795dc1025ebb"></a><!-- doxytag: member="batterychargermain&#45;working.c::controlDelayCounter" ref="acd768ec37d82f6e62016795dc1025ebb" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile uint16_t <a class="el" href="batterychargermain_8c.html#acd768ec37d82f6e62016795dc1025ebb">controlDelayCounter</a> = 0</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Counters available for timer functions. Timing is disabled if the value is initially set to zero. Enable it by setting it to the timeout value required. </p>

<p>Definition at line <a class="el" href="batterychargermain-working_8c_source.html#l00091">91</a> of file <a class="el" href="batterychargermain-working_8c_source.html">batterychargermain-working.c</a>.</p>

</div>
</div>
<a class="anchor" id="a0bc290cc1160ea6d01403b340173b1e0"></a><!-- doxytag: member="batterychargermain&#45;working.c::controlInterval" ref="a0bc290cc1160ea6d01403b340173b1e0" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile uint16_t <a class="el" href="batterychargermain-working_8c.html#a0bc290cc1160ea6d01403b340173b1e0">controlInterval</a> = 0</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Counters available for timer functions. Timing is disabled if the value is initially set to zero. Enable it by setting it to the timeout value required. </p>

<p>Definition at line <a class="el" href="batterychargermain-working_8c_source.html#l00093">93</a> of file <a class="el" href="batterychargermain-working_8c_source.html">batterychargermain-working.c</a>.</p>

</div>
</div>
<a class="anchor" id="aa5a6510f0f623d17e1e8fd6bbf2ad3e7"></a><!-- doxytag: member="batterychargermain&#45;working.c::controlTaskCounter" ref="aa5a6510f0f623d17e1e8fd6bbf2ad3e7" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile uint16_t <a class="el" href="batterychargermain-working_8c.html#aa5a6510f0f623d17e1e8fd6bbf2ad3e7">controlTaskCounter</a> = 0</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Counters available for timer functions. Timing is disabled if the value is initially set to zero. Enable it by setting it to the timeout value required. </p>

<p>Definition at line <a class="el" href="batterychargermain-working_8c_source.html#l00092">92</a> of file <a class="el" href="batterychargermain-working_8c_source.html">batterychargermain-working.c</a>.</p>

</div>
</div>
<a class="anchor" id="a600efb8c8ecd7f4087b87fb80b89b167"></a><!-- doxytag: member="batterychargermain&#45;working.c::controlTaskID" ref="a600efb8c8ecd7f4087b87fb80b89b167" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile uint8_t <a class="el" href="batterychargermain_8c.html#a600efb8c8ecd7f4087b87fb80b89b167">controlTaskID</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="batterychargermain-working_8c_source.html#l00133">133</a> of file <a class="el" href="batterychargermain-working_8c_source.html">batterychargermain-working.c</a>.</p>

</div>
</div>
<a class="anchor" id="afdacc362e4de77b49d506901c1047c6f"></a><!-- doxytag: member="batterychargermain&#45;working.c::dataInByteCount" ref="afdacc362e4de77b49d506901c1047c6f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile uint8_t <a class="el" href="batterychargermain_8c.html#afdacc362e4de77b49d506901c1047c6f">dataInByteCount</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Substate variable for data phase </p>

<p>Definition at line <a class="el" href="batterychargermain-working_8c_source.html#l00113">113</a> of file <a class="el" href="batterychargermain-working_8c_source.html">batterychargermain-working.c</a>.</p>

</div>
</div>
<a class="anchor" id="aedf793294b259d51ea70c9485a039d38"></a><!-- doxytag: member="batterychargermain&#45;working.c::dataOutByteCount" ref="aedf793294b259d51ea70c9485a039d38" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile uint8_t <a class="el" href="batterychargermain_8c.html#aedf793294b259d51ea70c9485a039d38">dataOutByteCount</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Substate variable for data phase </p>

<p>Definition at line <a class="el" href="batterychargermain-working_8c_source.html#l00122">122</a> of file <a class="el" href="batterychargermain-working_8c_source.html">batterychargermain-working.c</a>.</p>

</div>
</div>
<a class="anchor" id="a7b087536d89a99329e2fe6fb87b94fd9"></a><!-- doxytag: member="batterychargermain&#45;working.c::displayDelayCounter" ref="a7b087536d89a99329e2fe6fb87b94fd9" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile uint16_t <a class="el" href="batterychargermain_8c.html#a7b087536d89a99329e2fe6fb87b94fd9">displayDelayCounter</a> = 0</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Counters available for timer functions. Timing is disabled if the value is initially set to zero. Enable it by setting it to the timeout value required. </p>

<p>Definition at line <a class="el" href="batterychargermain-working_8c_source.html#l00094">94</a> of file <a class="el" href="batterychargermain-working_8c_source.html">batterychargermain-working.c</a>.</p>

</div>
</div>
<a class="anchor" id="afae27216d220c1223a10e27629712c19"></a><!-- doxytag: member="batterychargermain&#45;working.c::displayInterval" ref="afae27216d220c1223a10e27629712c19" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile uint16_t <a class="el" href="batterychargermain_8c.html#afae27216d220c1223a10e27629712c19">displayInterval</a> = 0</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Counters available for timer functions. Timing is disabled if the value is initially set to zero. Enable it by setting it to the timeout value required. </p>

<p>Definition at line <a class="el" href="batterychargermain-working_8c_source.html#l00096">96</a> of file <a class="el" href="batterychargermain-working_8c_source.html">batterychargermain-working.c</a>.</p>

</div>
</div>
<a class="anchor" id="a948ced818998317dce10237715d0c267"></a><!-- doxytag: member="batterychargermain&#45;working.c::displayTaskCounter" ref="a948ced818998317dce10237715d0c267" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile uint16_t <a class="el" href="batterychargermain_8c.html#a948ced818998317dce10237715d0c267">displayTaskCounter</a> = 0</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Counters available for timer functions. Timing is disabled if the value is initially set to zero. Enable it by setting it to the timeout value required. </p>

<p>Definition at line <a class="el" href="batterychargermain-working_8c_source.html#l00095">95</a> of file <a class="el" href="batterychargermain-working_8c_source.html">batterychargermain-working.c</a>.</p>

</div>
</div>
<a class="anchor" id="a6c79a5318db4ee8e65c6cef2a8a82ca0"></a><!-- doxytag: member="batterychargermain&#45;working.c::displayTaskID" ref="a6c79a5318db4ee8e65c6cef2a8a82ca0" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile uint8_t <a class="el" href="batterychargermain_8c.html#a6c79a5318db4ee8e65c6cef2a8a82ca0">displayTaskID</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="batterychargermain-working_8c_source.html#l00135">135</a> of file <a class="el" href="batterychargermain-working_8c_source.html">batterychargermain-working.c</a>.</p>

</div>
</div>
<a class="anchor" id="a9e85548c417798e5b7a10a374b17bf8b"></a><!-- doxytag: member="batterychargermain&#45;working.c::eepromCount" ref="a9e85548c417798e5b7a10a374b17bf8b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile uint8_t <a class="el" href="batterychargermain_8c.html#a9e85548c417798e5b7a10a374b17bf8b">eepromCount</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Databytes to read/write to EEPROM </p>

<p>Definition at line <a class="el" href="batterychargermain-working_8c_source.html#l00139">139</a> of file <a class="el" href="batterychargermain-working_8c_source.html">batterychargermain-working.c</a>.</p>

</div>
</div>
<a class="anchor" id="a79870af82979168fe9e4ffd0ba44a972"></a><!-- doxytag: member="batterychargermain&#45;working.c::eepromEnd" ref="a79870af82979168fe9e4ffd0ba44a972" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile uint16_t <a class="el" href="batterychargermain_8c.html#a79870af82979168fe9e4ffd0ba44a972">eepromEnd</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="batterychargermain-working_8c_source.html#l00153">153</a> of file <a class="el" href="batterychargermain-working_8c_source.html">batterychargermain-working.c</a>.</p>

</div>
</div>
<a class="anchor" id="a8e50d25b1b65538fb1ecb2ea96cbb53c"></a><!-- doxytag: member="batterychargermain&#45;working.c::initiateControlTaskID" ref="a8e50d25b1b65538fb1ecb2ea96cbb53c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile uint8_t <a class="el" href="batterychargermain_8c.html#a8e50d25b1b65538fb1ecb2ea96cbb53c">initiateControlTaskID</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="batterychargermain-working_8c_source.html#l00132">132</a> of file <a class="el" href="batterychargermain-working_8c_source.html">batterychargermain-working.c</a>.</p>

</div>
</div>
<a class="anchor" id="ad31eb454ba420d4b96a0ab081fad22b2"></a><!-- doxytag: member="batterychargermain&#45;working.c::inputBuffer" ref="ad31eb454ba420d4b96a0ab081fad22b2" args="[DATA_BUFFER_SIZE]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile uint8_t <a class="el" href="batterychargermain_8c.html#ad31eb454ba420d4b96a0ab081fad22b2">inputBuffer</a>[DATA_BUFFER_SIZE]</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Incoming data buffer </p>

<p>Definition at line <a class="el" href="batterychargermain-working_8c_source.html#l00115">115</a> of file <a class="el" href="batterychargermain-working_8c_source.html">batterychargermain-working.c</a>.</p>

</div>
</div>
<a class="anchor" id="a2a6b3e241086c8d77bf5ca1b95194a5d"></a><!-- doxytag: member="batterychargermain&#45;working.c::inputCommand" ref="a2a6b3e241086c8d77bf5ca1b95194a5d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile uint8_t <a class="el" href="batterychargermain_8c.html#a2a6b3e241086c8d77bf5ca1b95194a5d">inputCommand</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Command given by PC </p>

<p>Definition at line <a class="el" href="batterychargermain-working_8c_source.html#l00114">114</a> of file <a class="el" href="batterychargermain-working_8c_source.html">batterychargermain-working.c</a>.</p>

</div>
</div>
<a class="anchor" id="aebb9394d7ac906d5f7c365ee54de580a"></a><!-- doxytag: member="batterychargermain&#45;working.c::inputPacketReceiveID" ref="aebb9394d7ac906d5f7c365ee54de580a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile uint8_t <a class="el" href="batterychargermain_8c.html#aebb9394d7ac906d5f7c365ee54de580a">inputPacketReceiveID</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="batterychargermain-working_8c_source.html#l00128">128</a> of file <a class="el" href="batterychargermain-working_8c_source.html">batterychargermain-working.c</a>.</p>

</div>
</div>
<a class="anchor" id="a4f3924f246381d846250e2fd235fea0c"></a><!-- doxytag: member="batterychargermain&#45;working.c::lastError" ref="a4f3924f246381d846250e2fd235fea0c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile uint8_t <a class="el" href="batterychargermain_8c.html#a4f3924f246381d846250e2fd235fea0c">lastError</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Error code for transmission back </p>

<p>Definition at line <a class="el" href="batterychargermain-working_8c_source.html#l00106">106</a> of file <a class="el" href="batterychargermain-working_8c_source.html">batterychargermain-working.c</a>.</p>

</div>
</div>
<a class="anchor" id="ae4eaf3090c7441991d6d9eac9ea0df66"></a><!-- doxytag: member="batterychargermain&#45;working.c::localEEPROMDevice" ref="ae4eaf3090c7441991d6d9eac9ea0df66" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile uint8_t <a class="el" href="batterychargermain_8c.html#ae4eaf3090c7441991d6d9eac9ea0df66">localEEPROMDevice</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="batterychargermain-working_8c_source.html#l00152">152</a> of file <a class="el" href="batterychargermain-working_8c_source.html">batterychargermain-working.c</a>.</p>

</div>
</div>
<a class="anchor" id="aaf6e1032f4246d3cd5e3a3b341d2b671"></a><!-- doxytag: member="batterychargermain&#45;working.c::measurementInterval" ref="aaf6e1032f4246d3cd5e3a3b341d2b671" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile uint16_t <a class="el" href="batterychargermain-working_8c.html#aaf6e1032f4246d3cd5e3a3b341d2b671">measurementInterval</a> = 0</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Counters available for timer functions. Timing is disabled if the value is initially set to zero. Enable it by setting it to the timeout value required. </p>

<p>Definition at line <a class="el" href="batterychargermain-working_8c_source.html#l00098">98</a> of file <a class="el" href="batterychargermain-working_8c_source.html">batterychargermain-working.c</a>.</p>

</div>
</div>
<a class="anchor" id="a8d890aa792de12a76bf2966bcb97f2b0"></a><!-- doxytag: member="batterychargermain&#45;working.c::measurementTaskCounter" ref="a8d890aa792de12a76bf2966bcb97f2b0" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile uint16_t <a class="el" href="batterychargermain-working_8c.html#a8d890aa792de12a76bf2966bcb97f2b0">measurementTaskCounter</a> = 0</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Counters available for timer functions. Timing is disabled if the value is initially set to zero. Enable it by setting it to the timeout value required. </p>

<p>Definition at line <a class="el" href="batterychargermain-working_8c_source.html#l00097">97</a> of file <a class="el" href="batterychargermain-working_8c_source.html">batterychargermain-working.c</a>.</p>

</div>
</div>
<a class="anchor" id="a75ebbd2b2b4c1fc8b68aa5b6de48f08d"></a><!-- doxytag: member="batterychargermain&#45;working.c::measurementTaskID" ref="a75ebbd2b2b4c1fc8b68aa5b6de48f08d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile uint8_t <a class="el" href="batterychargermain_8c.html#a75ebbd2b2b4c1fc8b68aa5b6de48f08d">measurementTaskID</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="batterychargermain-working_8c_source.html#l00134">134</a> of file <a class="el" href="batterychargermain-working_8c_source.html">batterychargermain-working.c</a>.</p>

</div>
</div>
<a class="anchor" id="a027ce09cc85d623a7b88d5a50fa4bcba"></a><!-- doxytag: member="batterychargermain&#45;working.c::newBufferEndPointer" ref="a027ce09cc85d623a7b88d5a50fa4bcba" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile uint16_t <a class="el" href="batterychargermain_8c.html#a027ce09cc85d623a7b88d5a50fa4bcba">newBufferEndPointer</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Databytes to read/write to EEPROM </p>

<p>Definition at line <a class="el" href="batterychargermain-working_8c_source.html#l00145">145</a> of file <a class="el" href="batterychargermain-working_8c_source.html">batterychargermain-working.c</a>.</p>

</div>
</div>
<a class="anchor" id="a0db3e38524f5ab868ce22954a5e8b2ec"></a><!-- doxytag: member="batterychargermain&#45;working.c::numberConversions" ref="a0db3e38524f5ab868ce22954a5e8b2ec" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile uint16_t <a class="el" href="batterychargermain_8c.html#a0db3e38524f5ab868ce22954a5e8b2ec">numberConversions</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Databytes to read/write to EEPROM </p>

<p>Definition at line <a class="el" href="batterychargermain-working_8c_source.html#l00147">147</a> of file <a class="el" href="batterychargermain-working_8c_source.html">batterychargermain-working.c</a>.</p>

</div>
</div>
<a class="anchor" id="a21200e210f4d6e6bb3848327d1e8d305"></a><!-- doxytag: member="batterychargermain&#45;working.c::numberInBytes" ref="a21200e210f4d6e6bb3848327d1e8d305" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile uint8_t <a class="el" href="batterychargermain_8c.html#a21200e210f4d6e6bb3848327d1e8d305">numberInBytes</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Number of parameter bytes in packet </p>

<p>Definition at line <a class="el" href="batterychargermain-working_8c_source.html#l00112">112</a> of file <a class="el" href="batterychargermain-working_8c_source.html">batterychargermain-working.c</a>.</p>

</div>
</div>
<a class="anchor" id="ab4b4353148d1c692da89cf9756ccd212"></a><!-- doxytag: member="batterychargermain&#45;working.c::numberOutBytes" ref="ab4b4353148d1c692da89cf9756ccd212" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile uint8_t <a class="el" href="batterychargermain_8c.html#ab4b4353148d1c692da89cf9756ccd212">numberOutBytes</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Number of parameter bytes in packet </p>

<p>Definition at line <a class="el" href="batterychargermain-working_8c_source.html#l00121">121</a> of file <a class="el" href="batterychargermain-working_8c_source.html">batterychargermain-working.c</a>.</p>

</div>
</div>
<a class="anchor" id="a44fdf832ce87243ed73d608943a16280"></a><!-- doxytag: member="batterychargermain&#45;working.c::outputBuffer" ref="a44fdf832ce87243ed73d608943a16280" args="[DATA_BUFFER_SIZE]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile uint8_t <a class="el" href="batterychargermain_8c.html#a44fdf832ce87243ed73d608943a16280">outputBuffer</a>[DATA_BUFFER_SIZE]</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Outgoing data Buffer </p>

<p>Definition at line <a class="el" href="batterychargermain-working_8c_source.html#l00124">124</a> of file <a class="el" href="batterychargermain-working_8c_source.html">batterychargermain-working.c</a>.</p>

</div>
</div>
<a class="anchor" id="a9ca9d2f025bc5b95d5292f24001a69ca"></a><!-- doxytag: member="batterychargermain&#45;working.c::outputBusy" ref="a9ca9d2f025bc5b95d5292f24001a69ca" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile uint8_t <a class="el" href="batterychargermain_8c.html#a9ca9d2f025bc5b95d5292f24001a69ca">outputBusy</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Boolean to lock output </p>

<p>Definition at line <a class="el" href="batterychargermain-working_8c_source.html#l00119">119</a> of file <a class="el" href="batterychargermain-working_8c_source.html">batterychargermain-working.c</a>.</p>

</div>
</div>
<a class="anchor" id="a51dc2e1f8dc91e0f187a1a52f47c329a"></a><!-- doxytag: member="batterychargermain&#45;working.c::outputCommand" ref="a51dc2e1f8dc91e0f187a1a52f47c329a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile uint8_t <a class="el" href="batterychargermain_8c.html#a51dc2e1f8dc91e0f187a1a52f47c329a">outputCommand</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Command sent to PC </p>

<p>Definition at line <a class="el" href="batterychargermain-working_8c_source.html#l00123">123</a> of file <a class="el" href="batterychargermain-working_8c_source.html">batterychargermain-working.c</a>.</p>

</div>
</div>
<a class="anchor" id="a1567560e4d1bd520526129f1deb66cf2"></a><!-- doxytag: member="batterychargermain&#45;working.c::outputPacketSendID" ref="a1567560e4d1bd520526129f1deb66cf2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile uint8_t <a class="el" href="batterychargermain_8c.html#a1567560e4d1bd520526129f1deb66cf2">outputPacketSendID</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="batterychargermain-working_8c_source.html#l00129">129</a> of file <a class="el" href="batterychargermain-working_8c_source.html">batterychargermain-working.c</a>.</p>

</div>
</div>
<a class="anchor" id="ab34f433c219e0c523a7ef97522c879dc"></a><!-- doxytag: member="batterychargermain&#45;working.c::packetInState" ref="ab34f433c219e0c523a7ef97522c879dc" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile uint8_t <a class="el" href="batterychargermain_8c.html#ab34f433c219e0c523a7ef97522c879dc">packetInState</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>State variable for input machine </p>

<p>Definition at line <a class="el" href="batterychargermain-working_8c_source.html#l00111">111</a> of file <a class="el" href="batterychargermain-working_8c_source.html">batterychargermain-working.c</a>.</p>

</div>
</div>
<a class="anchor" id="afd5b550b656e871a608787628951ba26"></a><!-- doxytag: member="batterychargermain&#45;working.c::packetOutState" ref="afd5b550b656e871a608787628951ba26" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile uint8_t <a class="el" href="batterychargermain_8c.html#afd5b550b656e871a608787628951ba26">packetOutState</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>State variable for output machine </p>

<p>Definition at line <a class="el" href="batterychargermain-working_8c_source.html#l00120">120</a> of file <a class="el" href="batterychargermain-working_8c_source.html">batterychargermain-working.c</a>.</p>

</div>
</div>
<a class="anchor" id="a551c15929349e9202d22c74017bf8b35"></a><!-- doxytag: member="batterychargermain&#45;working.c::processCommandID" ref="a551c15929349e9202d22c74017bf8b35" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile uint8_t <a class="el" href="batterychargermain_8c.html#a551c15929349e9202d22c74017bf8b35">processCommandID</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="batterychargermain-working_8c_source.html#l00130">130</a> of file <a class="el" href="batterychargermain-working_8c_source.html">batterychargermain-working.c</a>.</p>

</div>
</div>
<a class="anchor" id="a598cd7cba0d489c139e3f1f6fb3e6242"></a><!-- doxytag: member="batterychargermain&#45;working.c::processErrorID" ref="a598cd7cba0d489c139e3f1f6fb3e6242" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile uint8_t <a class="el" href="batterychargermain_8c.html#a598cd7cba0d489c139e3f1f6fb3e6242">processErrorID</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="batterychargermain-working_8c_source.html#l00131">131</a> of file <a class="el" href="batterychargermain-working_8c_source.html">batterychargermain-working.c</a>.</p>

</div>
</div>
<a class="anchor" id="ae6a114ccbf95c0425aa1c846d08b3995"></a><!-- doxytag: member="batterychargermain&#45;working.c::rtcScale" ref="ae6a114ccbf95c0425aa1c846d08b3995" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile uint8_t <a class="el" href="batterychargermain_8c.html#ae6a114ccbf95c0425aa1c846d08b3995">rtcScale</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="batterychargermain-working_8c_source.html#l00151">151</a> of file <a class="el" href="batterychargermain-working_8c_source.html">batterychargermain-working.c</a>.</p>

</div>
</div>
<a class="anchor" id="a6d4cd547517c8331715865748d9c2f7e"></a><!-- doxytag: member="batterychargermain&#45;working.c::scaledChannelValue" ref="a6d4cd547517c8331715865748d9c2f7e" args="[4]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile uint16_t <a class="el" href="batterychargermain_8c.html#a6d4cd547517c8331715865748d9c2f7e">scaledChannelValue</a>[4]</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="batterychargermain-working_8c_source.html#l00156">156</a> of file <a class="el" href="batterychargermain-working_8c_source.html">batterychargermain-working.c</a>.</p>

</div>
</div>
<a class="anchor" id="a341d57392681258eec896170acfd2555"></a><!-- doxytag: member="batterychargermain&#45;working.c::shift" ref="a341d57392681258eec896170acfd2555" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile uint8_t <a class="el" href="batterychargermain_8c.html#a341d57392681258eec896170acfd2555">shift</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Databytes to read/write to EEPROM </p>

<p>Definition at line <a class="el" href="batterychargermain-working_8c_source.html#l00146">146</a> of file <a class="el" href="batterychargermain-working_8c_source.html">batterychargermain-working.c</a>.</p>

</div>
</div>
<a class="anchor" id="a85f9d04fa58cdbb8d366d1d238df2298"></a><!-- doxytag: member="batterychargermain&#45;working.c::time" ref="a85f9d04fa58cdbb8d366d1d238df2298" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">union <a class="el" href="uniontimeUnion.html">timeUnion</a>  <a class="el" href="batterychargermain_8c.html#a85f9d04fa58cdbb8d366d1d238df2298">time</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Real Time Clock Global Variable</p>
<p>The 32 bit time can also be accessed as four bytes. Time scale is defined in the information block. </p>

</div>
</div>
<a class="anchor" id="a7fd10db8318645a3d766299507ee04ec"></a><!-- doxytag: member="batterychargermain&#45;working.c::uartInput" ref="a7fd10db8318645a3d766299507ee04ec" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile uint16_t <a class="el" href="batterychargermain_8c.html#a7fd10db8318645a3d766299507ee04ec">uartInput</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Character and errorcode read from uart </p>

<p>Definition at line <a class="el" href="batterychargermain-working_8c_source.html#l00105">105</a> of file <a class="el" href="batterychargermain-working_8c_source.html">batterychargermain-working.c</a>.</p>

</div>
</div>
</div>
<hr size="1"/><address style="text-align: right;"><small>Generated on Wed Mar 31 21:17:28 2010 for BatteryCharger by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
