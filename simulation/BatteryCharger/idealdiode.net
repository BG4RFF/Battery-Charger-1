* gnetlist -g spice-sdb -o idealdiode.net idealdiode.sch
*********************************************************
* Spice file generated by gnetlist                      *
* spice-sdb version 4.28.2007 by SDB --                 *
* provides advanced spice netlisting capability.        *
* Documentation at http://www.brorson.com/gEDA/SPICE/   *
*********************************************************
*vvvvvvvv  Included SPICE model from /home/ksarkies/Development-Electronics/Spice-models/models.lib vvvvvvvv
* Spice models being used in simulations

**  BJT

************************************************************************************
.MODEL T2N2222 NPN( LEVEL=1 BF=241 NE=1.35 IK=.35
+ IS=3.52E-14 VA=100 VB=100 BR=13.1 NC=1.61 IKR=.106
+ CJE=23.8PF ME=.43 PE=1.0 CJC=14.7PF MC=.42 PC=1.0
+ RE=.26 RC=.30 RB=2.1 TF=.31NS TR=89NS )
************************************************************************************
.model Q2N3906 PNP( LEVEL=1 BF=135,BR=4.55,IS=4.47E-15,RB=5.8,RC=25,RE=.8,
+VA=25,VB=10.8,IK=61.7M,NE=1.394,IKR=.03,NC=1.325,TF=.282N,
+CJE=5.67P,PE=.83,ME=.4,CJC=2.21P,PC=.43,MC=.5,EG=1.11)
************************************************************************************
.model Q2N3904 NPN( LEVEL=1 BF=238,IS=1.27E-14,RB=12,RC=25,RE=.3,
+VA=241,IK=.1099,NE=1.399,TF=1.53E-10,CJE=5.9P,PE=.83,ME=.4,
+CJC=2.11P,PC=.5,MC=.5,EG=1.11)
************************************************************************************
.model BC337 NPN( LEVEL=1 IS=8.52E-15 VAF=120.7 BF=280 IKF=1.1412 NE=1.3647
+    ISE=3.562E-14 IKR=0.1 ISC=1.00E-12 NC=1.4 NR=1 BR=10 RC=0.05 CJC=1.20E-11
+    FC=0.5 MJC=0.28 VJC=0.4 CJE=3.10E-11 MJE=0.38 VJE=0.9 TF=4.10E-10
+    ITF=1.5 VTF=3 XTF=25 RE=0.2 TR=8.00E-10)
************************************************************************************
.model TIP31   NPN(Is=2.447p Xti=3 Eg=1.11 Vaf=100 Bf=208.2 Ise=70.69p
+               Ne=1.565 Ikf=.9743 Xtb=1.5 Br=12.59 Isc=11.68n
+               Nc=1.835 Ikr=3.86 Rc=.4685 Cjc=142p Mjc=.4353 Vjc=.75 Fc=.5
+               Cje=188.5p Mje=.4878 Vje=.75 Tr=194.2n Tf=19.85n Itf=164.1
+               Xtf=5.945 Vtf=10 Rb=.1)
************************************************************************************

** DIODES

************************************************************************************
.MODEL D1N4148  D( RS=.8   IS=2.4P    N=1.77 BV=75    IBV=.001  CJO=1.5P
+                 VJ=.75   M=.5     TT=5.8N )
************************************************************************************
.MODEL D1N4001 D(IS=29.5E-9 RS=73.5E-3 N=1.96 CJO=34.6P VJ=0.627 M=0.461 BV=60 IBV=10U)
************************************************************************************
.model D1N914	D(Is=0.1p Rs=16 CJO=2p Tt=12n Bv=100 Ibv=0.1p)
************************************************************************************
* Schottky Diodes

************************************************************************************
.MODEL D1N5819       D(Is=2.835u Rs=47.12m Ikf=.3227 N=1 Xti=0 Eg=1.11 Cjo=302.5p
+		M=.7206 Vj=.75 Fc=.5)
************************************************************************************
** Zener Diodes

************************************************************************************
.model D1N4099	D(Is=1.004f Rs=.5875 Ikf=0 N=1 Xti=3 Eg=1.11 Cjo=160p M=.5484
+		Vj=.75 Fc=.5 Bv=6.8 Ibv=27.721m)
************************************************************************************
.model D1N4627	D(Is=1.004f Rs=.5875 Ikf=0 N=1 Xti=3 Eg=1.11 Cjo=160p M=.5484
+		Vj=.75 Fc=.5 Bv=6.2 Ibv=27.721m)
************************************************************************************
.model D1N4100	D(Is=1.004f Rs=.5875 Ikf=0 N=1 Xti=3 Eg=1.11 Cjo=160p M=.5484
+		Vj=.75 Fc=.5 Bv=7.5 Ibv=27.721m)
************************************************************************************
.model D1N4101	D(Is=1.004f Rs=.5875 Ikf=0 N=1 Xti=3 Eg=1.11 Cjo=160p M=.5484
+		Vj=.75 Fc=.5 Bv=8.2 Ibv=27.721m)
************************************************************************************
.model DZener12	D(Is=1.004f Rs=.5875 Ikf=0 N=1 Xti=3 Eg=1.11 Cjo=160p M=.5484
+		Vj=.75 Fc=.5 Bv=12 Ibv=27.721m)
************************************************************************************
.model DZener42	D(Is=1.004f Rs=.5875 Ikf=0 N=1 Xti=3 Eg=1.11 Cjo=160p M=.5484
+		Vj=.75 Fc=.5 Bv=4.2 Ibv=27.721m)
************************************************************************************
* OpAmps
************************************************************************************
*//////////////////////////////////////////////////////////
*LM324 Low Power Quad OPERATIONAL AMPLIFIER MACRO-MODEL
*//////////////////////////////////////////////////////////
*
* connections:      non-inverting input
*                   |   inverting input
*                   |   |   positive power supply
*                   |   |   |   negative power supply
*                   |   |   |   |   output
*                   |   |   |   |   |
*                   |   |   |   |   |
.SUBCKT LM324       1   2  99  50  28
*
*Features:
*Eliminates need for dual supplies
*Large DC voltage gain =             100dB
*High bandwidth =                     1MHz
*Low input offset voltage =            2mV
*Wide supply range =        +-1.5V to +-16V
*
*NOTE: Model is for single device only and simulated
*      supply current is 1/4 of total device current.
*      Output crossover distortion with dual supplies
*      is not modeled.
*
****************INPUT STAGE**************
*
IOS 2 1 5N
*^Input offset current
R1 1 3 500K
R2 3 2 500K
I1 99 4 100U
R3 5 50 517
R4 6 50 517
Q1 5 2 4 QX
Q2 6 7 4 QX
*Fp2=1.2 MHz
C4 5 6 128.27P
*
***********COMMON MODE EFFECT***********
*
I2 99 50 75U
*^Quiescent supply current
EOS 7 1 POLY(1) 16 49 2E-3 1
*Input offset voltage.^
R8 99 49 60K
R9 49 50 60K
*
*********OUTPUT VOLTAGE LIMITING********
V2 99 8 1.63
D1 9 8 DX
D2 10 9 DX
V3 10 50 .635
*
**************SECOND STAGE**************
*
EH 99 98 99 49 1
G1 98 9 POLY(1) 5 6 0 9.8772E-4 0 .3459
*Fp1=7.86 Hz
R5 98 9 101.2433MEG
C3 98 9 200P
*
***************POLE STAGE***************
*
*Fp=2 MHz
G3 98 15 9 49 1E-6
R12 98 15 1MEG
C5 98 15 7.9577E-14
*
*********COMMON-MODE ZERO STAGE*********
*
*Fpcm=10 KHz
G4 98 16 3 49 5.6234E-8               
L2 98 17 15.9M
R13 17 16 1K
*
**************OUTPUT STAGE**************
*
F6 50 99 POLY(1) V6 300U 1
E1 99 23 99 15 1
R16 24 23 17.5
D5 26 24 DX
V6 26 22 .63V
R17 23 25 17.5
D6 25 27 DX
V7 22 27 .63V
V5 22 21 0.27V
D4 21 15 DX
V4 20 22 0.27V
D3 15 20 DX
L3 22 28 500P
RL3 22 28 100K
*
***************MODELS USED**************
*
.MODEL DX D(IS=1E-15)
.MODEL QX PNP(BF=1.111E3)
*
.ENDS
************************************************************************************
.SUBCKT irf1104 1 2 3
**************************************
*      Model Generated by MODPEX     *
*Copyright(c) Symmetry Design Systems*
*         All Rights Reserved        *
*    UNPUBLISHED LICENSED SOFTWARE   *
*   Contains Proprietary Information *
*      Which is The Property of      *
*     SYMMETRY OR ITS LICENSORS      *
*Commercial Use or Resale Restricted *
*   by Symmetry License Agreement    *
**************************************
* Model generated on Jan  6, 98
* MODEL FORMAT: SPICE3
* Symmetry POWER MOS Model (Version 1.0)
* External Node Designations
* Node 1 -> Drain
* Node 2 -> Gate
* Node 3 -> Source
M1 9 7 8 8 MM L=100u W=100u
* Default values used in MM:
* The voltage-dependent capacitances are
* not included. Other default values are:
*   RS=0 RD=0 LD=0 CBD=0 CBS=0 CGBO=0
.MODEL MM NMOS LEVEL=1 IS=1e-32
+VTO=4.016 LAMBDA=0 KP=24.9968
+CGSO=2.67866e-05 CGDO=1.00181e-06
RS 8 3 0.0001
D1 3 1 MD
.MODEL MD D IS=2.9505e-11 RS=0.00319022 N=1.10603 BV=40
+IBV=0.00025 EG=1.2 XTI=2.95239 TT=1.99991e-05
+CJO=3.41485e-09 VJ=1.33209 M=0.470743 FC=0.1
RDS 3 1 1e+06
RD 9 1 0.00327083
RG 2 7 4.09017
D2 4 5 MD1
* Default values used in MD1:
*   RS=0 EG=1.11 XTI=3.0 TT=0
*   BV=infinite IBV=1mA
.MODEL MD1 D IS=1e-32 N=50
+CJO=1.7269e-09 VJ=0.934228 M=0.806705 FC=1e-08
D3 0 5 MD2
* Default values used in MD2:
*   EG=1.11 XTI=3.0 TT=0 CJO=0
*   BV=infinite IBV=1mA
.MODEL MD2 D IS=1e-10 N=0.4 RS=3e-06
RL 5 10 1
FI2 7 9 VFI2 -1
VFI2 4 0 0
EV16 10 0 9 7 1
CAP 11 10 2.28735e-09
FI1 7 9 VFI1 -1
VFI1 11 6 0
RCAP 6 10 1
D4 0 6 MD3
* Default values used in MD3:
*   EG=1.11 XTI=3.0 TT=0 CJO=0
*   RS=0 BV=infinite IBV=1mA
.MODEL MD3 D IS=1e-10 N=0.4
.ENDS irf1104************************************************************************************
.SUBCKT irf5305s 1 2 3
**************************************
*      Model Generated by MODPEX     *
*Copyright(c) Symmetry Design Systems*
*         All Rights Reserved        *
*    UNPUBLISHED LICENSED SOFTWARE   *
*   Contains Proprietary Information *
*      Which is The Property of      *
*     SYMMETRY OR ITS LICENSORS      *
*Commercial Use or Resale Restricted *
*   by Symmetry License Agreement    *
**************************************
* Model generated on Apr 23, 96
* Model format: SPICE3
* Symmetry POWER MOS Model (Version 1.0)
* External Node Designations
* Node 1 -> Drain
* Node 2 -> Gate
* Node 3 -> Source
M1 9 7 8 8 MM L=100u W=100u
* Default values used in MM:
* The voltage-dependent capacitances are
* not included. Other default values are:
*   RS=0 RD=0 LD=0 CBD=0 CBS=0 CGBO=0
.MODEL MM PMOS LEVEL=1 IS=1e-32
+VTO=-3.45761 LAMBDA=0 KP=10.066
+CGSO=1.03141e-05 CGDO=1e-11
RS 8 3 0.0262305
D1 1 3 MD
.MODEL MD D IS=8.90854e-09 RS=0.00921723 N=1.5 BV=55
+IBV=0.00025 EG=1.2 XTI=3.13635 TT=1e-07
+CJO=1.30546e-09 VJ=0.663932 M=0.419045 FC=0.5
RDS 3 1 2.2e+06
RD 9 1 0.0001
RG 2 7 11.0979
D2 5 4 MD1
* Default values used in MD1:
*   RS=0 EG=1.11 XTI=3.0 TT=0
*   BV=infinite IBV=1mA
.MODEL MD1 D IS=1e-32 N=50
+CJO=1.63729e-09 VJ=0.791199 M=0.552278 FC=1e-08
D3 5 0 MD2
* Default values used in MD2:
*   EG=1.11 XTI=3.0 TT=0 CJO=0
*   BV=infinite IBV=1mA
.MODEL MD2 D IS=1e-10 N=0.400245 RS=3e-06
RL 5 10 1
FI2 7 9 VFI2 -1
VFI2 4 0 0
EV16 10 0 9 7 1
CAP 11 10 1.89722e-09
FI1 7 9 VFI1 -1
VFI1 11 6 0
RCAP 6 10 1
D4 6 0 MD3
* Default values used in MD3:
*   EG=1.11 XTI=3.0 TT=0 CJO=0
*   RS=0 BV=infinite IBV=1mA
.MODEL MD3 D IS=1e-10 N=0.400245
.ENDS
************************************************************************************

*^^^^^^^^  End of included SPICE model from /home/ksarkies/Development-Electronics/Spice-models/models.lib ^^^^^^^^
*
*==============  Begin SPICE netlist of main design ============
D4 Q1C isolate D1N4001 
V1 1 4 pulse 5 15 10n 10n 100n 10u 25u
R4 Q1C 0 1K  
Vp2 2 drain 0V
X1 2 isolate 0 irf1104
Vp3 drain 3 0V
Q2 Q1coll Base 3 BC337 
Q1 Q1C Base 0 BC337 
R2 Q1coll 1 100  
V2 1 0 12V
R1 Q1C 1 100  
RL drain 4 1  
Q4 0 Q1C isolate Q2N3906 
RB Base 1 1K  
.end
