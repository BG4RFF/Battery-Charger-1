* gnetlist -g spice-sdb -o BatteryChargerOdd.net BatteryChargerOdd.sch
*********************************************************
* Spice file generated by gnetlist                      *
* spice-sdb version 4.28.2007 by SDB --                 *
* provides advanced spice netlisting capability.        *
* Documentation at http://www.brorson.com/gEDA/SPICE/   *
*********************************************************
*vvvvvvvv  Included SPICE model from /home/ksarkies/Development-Electronics/Spice-models/models.lib vvvvvvvv
* Spice models being used in simulations

**  BJT

************************************************************************************
.MODEL T2N2222 NPN( LEVEL=1 BF=241 NE=1.35 IK=.35
+ IS=3.52E-14 VA=100 VB=100 BR=13.1 NC=1.61 IKR=.106
+ CJE=23.8PF ME=.43 PE=1.0 CJC=14.7PF MC=.42 PC=1.0
+ RE=.26 RC=.30 RB=2.1 TF=.31NS TR=89NS )

************************************************************************************
.model Q2N3906 PNP( LEVEL=1 BF=135,BR=4.55,IS=4.47E-15,RB=5.8,RC=25,RE=.8,
+VA=25,VB=10.8,IK=61.7M,NE=1.394,IKR=.03,NC=1.325,TF=.282N,
+CJE=5.67P,PE=.83,ME=.4,CJC=2.21P,PC=.43,MC=.5,EG=1.11)
************************************************************************************
.model Q2N3904 NPN( LEVEL=1 BF=238,IS=1.27E-14,RB=12,RC=25,RE=.3,
+VA=241,IK=.1099,NE=1.399,TF=1.53E-10,CJE=5.9P,PE=.83,ME=.4,
+CJC=2.11P,PC=.5,MC=.5,EG=1.11)
************************************************************************************
.model BC337 NPN( LEVEL=1 IS=8.52E-15 VAF=120.7 BF=280 IKF=1.1412 NE=1.3647
+    ISE=3.562E-14 IKR=0.1 ISC=1.00E-12 NC=1.4 NR=1 BR=10 RC=0.05 CJC=1.20E-11
+    FC=0.5 MJC=0.28 VJC=0.4 CJE=3.10E-11 MJE=0.38 VJE=0.9 TF=4.10E-10
+    ITF=1.5 VTF=3 XTF=25 RE=0.2 TR=8.00E-10)
************************************************************************************
.model TIP31   NPN(Is=2.447p Xti=3 Eg=1.11 Vaf=100 Bf=208.2 Ise=70.69p
+               Ne=1.565 Ikf=.9743 Xtb=1.5 Br=12.59 Isc=11.68n
+               Nc=1.835 Ikr=3.86 Rc=.4685 Cjc=142p Mjc=.4353 Vjc=.75 Fc=.5
+               Cje=188.5p Mje=.4878 Vje=.75 Tr=194.2n Tf=19.85n Itf=164.1
+               Xtf=5.945 Vtf=10 Rb=.1)
************************************************************************************

** DIODES

************************************************************************************
.MODEL D1N4148  D( RS=.8   IS=2.4P    N=1.77 BV=75    IBV=.001  CJO=1.5P
+                 VJ=.75   M=.5     TT=5.8N )
************************************************************************************
.MODEL D1N4001 D IS=29.5E-9 RS=73.5E-3 N=1.96 CJO=34.6P VJ=0.627
+M=0.461 BV=60 IBV=10U
************************************************************************************

** ZENER DIODES

************************************************************************************
.model D1N4099	D(Is=1.004f Rs=.5875 Ikf=0 N=1 Xti=3 Eg=1.11 Cjo=160p M=.5484
+		Vj=.75 Fc=.5 Bv=6.8 Ibv=27.721m)
************************************************************************************
.model D1N4627	D(Is=1.004f Rs=.5875 Ikf=0 N=1 Xti=3 Eg=1.11 Cjo=160p M=.5484
+		Vj=.75 Fc=.5 Bv=6.2 Ibv=27.721m)
************************************************************************************
.model D1N4100	D(Is=1.004f Rs=.5875 Ikf=0 N=1 Xti=3 Eg=1.11 Cjo=160p M=.5484
+		Vj=.75 Fc=.5 Bv=7.5 Ibv=27.721m)
************************************************************************************
.model D1N4101	D(Is=1.004f Rs=.5875 Ikf=0 N=1 Xti=3 Eg=1.11 Cjo=160p M=.5484
+		Vj=.75 Fc=.5 Bv=8.2 Ibv=27.721m)
************************************************************************************
.model DZener12	D(Is=1.004f Rs=.5875 Ikf=0 N=1 Xti=3 Eg=1.11 Cjo=160p M=.5484
+		Vj=.75 Fc=.5 Bv=12 Ibv=27.721m)
************************************************************************************
.model DZener42	D(Is=1.004f Rs=.5875 Ikf=0 N=1 Xti=3 Eg=1.11 Cjo=160p M=.5484
+		Vj=.75 Fc=.5 Bv=4.2 Ibv=27.721m)
************************************************************************************
* OpAmps
************************************************************************************
*//////////////////////////////////////////////////////////
*LM324 Low Power Quad OPERATIONAL AMPLIFIER MACRO-MODEL
*//////////////////////////////////////////////////////////
*
* connections:      non-inverting input
*                   |   inverting input
*                   |   |   positive power supply
*                   |   |   |   negative power supply
*                   |   |   |   |   output
*                   |   |   |   |   |
*                   |   |   |   |   |
.SUBCKT LM324       1   2  99  50  28
*
*Features:
*Eliminates need for dual supplies
*Large DC voltage gain =             100dB
*High bandwidth =                     1MHz
*Low input offset voltage =            2mV
*Wide supply range =        +-1.5V to +-16V
*
*NOTE: Model is for single device only and simulated
*      supply current is 1/4 of total device current.
*      Output crossover distortion with dual supplies
*      is not modeled.
*
****************INPUT STAGE**************
*
IOS 2 1 5N
*^Input offset current
R1 1 3 500K
R2 3 2 500K
I1 99 4 100U
R3 5 50 517
R4 6 50 517
Q1 5 2 4 QX
Q2 6 7 4 QX
*Fp2=1.2 MHz
C4 5 6 128.27P
*
***********COMMON MODE EFFECT***********
*
I2 99 50 75U
*^Quiescent supply current
EOS 7 1 POLY(1) 16 49 2E-3 1
*Input offset voltage.^
R8 99 49 60K
R9 49 50 60K
*
*********OUTPUT VOLTAGE LIMITING********
V2 99 8 1.63
D1 9 8 DX
D2 10 9 DX
V3 10 50 .635
*
**************SECOND STAGE**************
*
EH 99 98 99 49 1
G1 98 9 POLY(1) 5 6 0 9.8772E-4 0 .3459
*Fp1=7.86 Hz
R5 98 9 101.2433MEG
C3 98 9 200P
*
***************POLE STAGE***************
*
*Fp=2 MHz
G3 98 15 9 49 1E-6
R12 98 15 1MEG
C5 98 15 7.9577E-14
*
*********COMMON-MODE ZERO STAGE*********
*
*Fpcm=10 KHz
G4 98 16 3 49 5.6234E-8               
L2 98 17 15.9M
R13 17 16 1K
*
**************OUTPUT STAGE**************
*
F6 50 99 POLY(1) V6 300U 1
E1 99 23 99 15 1
R16 24 23 17.5
D5 26 24 DX
V6 26 22 .63V
R17 23 25 17.5
D6 25 27 DX
V7 22 27 .63V
V5 22 21 0.27V
D4 21 15 DX
V4 20 22 0.27V
D3 15 20 DX
L3 22 28 500P
RL3 22 28 100K
*
***************MODELS USED**************
*
.MODEL DX D(IS=1E-15)
.MODEL QX PNP(BF=1.111E3)
*
.ENDS
************************************************************************************

*^^^^^^^^  End of included SPICE model from /home/ksarkies/Development-Electronics/Spice-models/models.lib ^^^^^^^^
*
*==============  Begin SPICE netlist of main design ============
R8 8 6 1K  
R7 11 8 1K  
D2 Q3C Q3E D1N4148 
V1 VDD 0 DC 12V
D4 4 0 D1N4001 
X3.3 4 Q1E 10 LM324
R5 3 Q3E 0.56  
Q1 3 2 Q1E TIP31 
Q3 Q3C 6 Q3E BC337 
Q2 VDD 1 Q2E TIP31 
R3 5 VDD 22K  
R2 0 Q1E 0.56  
R1 4 VDD 1K  
D1 Q3C 5 D1N4099 
R10 3 7 100  
C1 Q3E 6 0.1uF  
R4 9 1 47  
R11 7 12 10K  
R6 2 10 100  
D5 0 11 unknown 
R9 12 VDD 10K  
D3 12 3 D1N4148 
X2.2 5 Q2E 9 LM324
X1.1 7 Q3E 8 LM324
VBattery Q2E Q3E DC 7.2V
.end
